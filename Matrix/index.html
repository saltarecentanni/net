<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="app-version" content="3.6.021">
    <title>Tiesse Matrix Network - Tiesse S.P.A.</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect width='100' height='100' rx='15' fill='%231e40af'/><circle cx='25' cy='25' r='8' fill='%2360a5fa'/><circle cx='75' cy='25' r='8' fill='%2360a5fa'/><circle cx='25' cy='75' r='8' fill='%2360a5fa'/><circle cx='75' cy='75' r='8' fill='%2360a5fa'/><circle cx='50' cy='50' r='10' fill='%23fbbf24'/><line x1='25' y1='25' x2='50' y2='50' stroke='%2393c5fd' stroke-width='3'/><line x1='75' y1='25' x2='50' y2='50' stroke='%2393c5fd' stroke-width='3'/><line x1='25' y1='75' x2='50' y2='50' stroke='%2393c5fd' stroke-width='3'/><line x1='75' y1='75' x2='50' y2='50' stroke='%2393c5fd' stroke-width='3'/></svg>">
    <!-- Local libraries for offline/intranet use (NO EXTERNAL CDN) -->
    <script src="assets/vendor/tailwind.min.js"></script>
    <script src="assets/vendor/xlsx.full.min.js"></script>
    <script src="assets/vendor/sweetalert2.min.js"></script>
    <script src="assets/vendor/chart.min.js"></script>
    <!-- Custom CSS with cache-busting -->
    <link rel="stylesheet" href="css/styles.css?v=3.6.021">
</head>
<body class="bg-gradient-to-br from-slate-50 to-slate-100 min-h-screen">
    <div id="syncIndicator" class="sync-indicator" style="display:none;"></div>
    
    <div class="w-full px-4 py-4">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4" role="banner">
            <div class="flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <!-- Logo Tiesse - Clic√°vel para refresh/home -->
                    <a href="index.html" title="Torna alla pagina principale" class="hover:opacity-80 transition-opacity">
                        <img src="assets/logoTiesse.png" alt="Tiesse S.P.A. Logo" class="h-8 w-auto cursor-pointer">
                    </a>
                    <div>
                        <div class="flex items-baseline gap-2">
                            <h1 class="text-2xl font-bold text-slate-800">Matrix Network</h1>
                            <span class="text-xs text-slate-400 font-medium">by Tiesse S.P.A.</span>
                        </div>
                        <p class="text-slate-600 text-sm">Gestione visuale di dispositivi di rete, porte e connessioni</p>
                    </div>
                </div>
                <div class="flex items-center gap-3" role="navigation" aria-label="User actions">
                    <!-- Auth Controls -->
                    <span id="userInfo" class="text-sm font-semibold text-green-600" style="display:none;" role="status" aria-live="polite"></span>
                    <button id="loginBtn" onclick="Auth.showLoginModal()" class="view-mode-only bg-blue-500 hover:bg-blue-600 text-white font-semibold py-1.5 px-4 rounded-lg text-sm" aria-label="Enter edit mode">
                        üîì Edit Mode
                    </button>
                    <button id="logoutBtn" onclick="Auth.logout()" class="edit-mode-only bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm" style="display:none;" aria-label="Logout and exit edit mode">
                        üîí Logout
                    </button>
                    <button onclick="switchTab('logs')" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-1.5 px-3 rounded-lg text-sm" title="Activity Logs" aria-label="View activity logs">
                        üìã
                    </button>
                    <div id="onlineUsersIndicator" class="relative flex items-center justify-center bg-emerald-100 text-emerald-700 font-bold py-1.5 px-2.5 rounded-lg text-sm min-w-[36px] cursor-default" title="Utenti online" role="status" aria-live="polite" aria-label="Online users count">
                        <span id="onlineUsersCount">--</span>
                    </div>
                    <div class="text-right text-xs text-slate-500">
                        <div class="font-semibold text-slate-700">Tiesse S.P.A.</div>
                        <div class="text-slate-600">Versione: <span id="appVersion" class="font-semibold">v3.6.021</span></div>
                    </div>
                </div>
            </div>
        </div>

        <script>
            (function(){
                var meta = document.querySelector('meta[name="app-version"]');
                var ver = meta ? meta.getAttribute('content') : '';
                var el = document.getElementById('appVersion');
                if (el) el.textContent = ver ? ('v' + ver) : '';
            })();
        </script>

        <!-- Actions Bar -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-4">
            <div class="flex flex-wrap gap-2 items-center justify-between">
                <div class="flex items-center gap-4">
                    <h2 class="text-lg font-bold text-slate-800">Actions</h2>
                    <!-- Global Location Filter -->
                    <div class="flex items-center gap-2 bg-slate-100 border border-slate-300 rounded-lg px-2 py-1">
                        <select id="locationFilter" onchange="filterByLocation();" class="px-2 py-1 text-sm border-0 bg-transparent font-semibold text-slate-800 cursor-pointer focus:outline-none" aria-label="Filter by location">
                            <option value="">üåê All Locations</option>
                        </select>
                        <span id="totalLocationsCount" class="bg-slate-600 text-white text-xs font-bold px-2 py-0.5 rounded-full">0</span>
                    </div>
                    <!-- Stats Counters -->
                    <div class="flex items-center gap-2">
                        <button onclick="switchTab('devices')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-1.5 px-3 rounded-lg text-sm shadow-sm transition-all">
                            üì± <span id="totalDevicesCount">0</span> Devices
                        </button>
                        <button onclick="switchTab('active')" class="bg-green-500 hover:bg-green-600 text-white font-bold py-1.5 px-3 rounded-lg text-sm shadow-sm transition-all">
                            ‚ö° <span id="totalConnectionsCount">0</span> Connections
                        </button>
                    </div>
                </div>
                <div class="flex flex-wrap gap-2">
                    <!-- Edit Mode Only -->
                    <button onclick="saveNow()" class="edit-mode-only bg-green-600 hover:bg-green-700 text-white font-semibold py-1.5 px-3 rounded-lg text-sm" style="display:none;">
                        üíæ Save Now
                    </button>
                    <!-- Last Update Badge -->
                    <button class="bg-red-600 hover:bg-red-700 text-white font-bold py-1.5 px-3 rounded-lg text-sm shadow-sm transition-all" 
                            title="Data dell'ultimo salvataggio del sistema">
                        üìÖ <span id="lastUpdateDate">00/00/0000</span>
                    </button>
                    <!-- Public -->
                    <button onclick="exportExcel()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm">
                        üìä Export to Excel
                    </button>
                    <button onclick="exportJSON()" class="bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm">
                        üíæ Export JSON
                    </button>
                    <!-- Edit Mode Only -->
                    <input type="file" id="importFile" accept=".json" onchange="importData(event)" class="hidden">
                    <button onclick="document.getElementById('importFile').click()" class="edit-mode-only bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm" style="display:none;">
                        üì• Import JSON
                    </button>
                    <button onclick="clearAll()" class="edit-mode-only bg-red-500 hover:bg-red-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm" style="display:none;">
                        Clear All
                    </button>
                </div>
            </div>
        </div>

        <!-- Tabs Navigation -->
        <div class="bg-white rounded-t-xl shadow-lg">
            <div class="flex border-b overflow-x-auto">
                <button class="tab-btn active" onclick="switchTab('dashboard')" id="tab-dashboard" title="Dashboard con statistiche e ricerca intelligente">
                    ü™ß Dashboard
                </button>
                <button class="tab-btn" onclick="switchTab('devices')" id="tab-devices" title="Aggiungi, modifica o rimuovi dispositivi di rete Tiesse.">
                    üì± Devices
                </button>
                <button class="tab-btn" onclick="switchTab('active')" id="tab-active" title="Crea e gestisci le connessioni tra dispositivi.">
                    ‚ö° Active Connections
                </button>
                <button class="tab-btn" onclick="switchTab('drawio')" id="tab-drawio" title="Visualizza graficamente la topologia della rete.">
                    üó∫Ô∏è Topology
                </button>
                <button class="tab-btn" onclick="switchTab('matrix')" id="tab-matrix" title="Matrici visiva di tutte le connessioni.">
                    üìä Matrix
                </button>
                <button class="tab-btn" onclick="switchTab('floorplan')" id="tab-floorplan" title="Mappa fisica della posizione degli equipaggiamenti.">
                    üè¢ Floor Plan
                </button>
                <button class="tab-btn" onclick="switchTab('help')" id="tab-help">
                    ‚ùì Help
                </button>
            </div>
        </div>

        <!-- Tab Contents -->
        <div class="bg-white rounded-b-xl shadow-lg p-4 mb-4">
            
            <!-- Tab 0: Dashboard -->
            <div id="content-dashboard" class="tab-content active">
                <!-- Stats Cards (clickable links) -->
                <div class="grid grid-cols-3 gap-3 mb-3">
                    <a href="javascript:switchTab('devices')" class="bg-gradient-to-br from-slate-600 to-slate-700 text-white rounded-lg p-3 shadow hover:shadow-md hover:scale-[1.02] transition-all block" style="cursor: pointer;">
                        <div class="text-2xl font-bold" id="statTotalDevices">0</div>
                        <div class="text-slate-200 text-xs">üì± Total Devices</div>
                    </a>
                    <a href="javascript:switchTab('active')" class="bg-gradient-to-br from-rose-500 to-rose-600 text-white rounded-lg p-3 shadow hover:shadow-md hover:scale-[1.02] transition-all block" style="cursor: pointer;">
                        <div class="text-2xl font-bold" id="statTotalConnections">0</div>
                        <div class="text-rose-100 text-xs">‚ö° Connections</div>
                    </a>
                    <a href="javascript:switchTab('floorplan')" class="bg-gradient-to-br from-amber-500 to-orange-500 text-white rounded-lg p-3 shadow hover:shadow-md hover:scale-[1.02] transition-all block" style="cursor: pointer;">
                        <div class="text-2xl font-bold" id="statTotalRooms">0</div>
                        <div class="text-amber-100 text-xs">üè¢ Locations</div>
                    </a>
                </div>
                
                <!-- Search Section -->
                <div class="relative mb-3">
                    <div class="relative">
                        <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500 text-lg">üîé</span>
                        <input type="text" id="dashboardSearch" 
                            placeholder="Cerca dispositivi e connessioni: nome, IP, MAC, porta, tipo, location, gruppo..."
                            class="w-full pl-12 pr-10 py-3 border-2 border-slate-300 rounded-xl text-sm focus:border-blue-500 focus:ring-2 focus:ring-blue-200 shadow-sm hover:shadow-md bg-white transition-all"
                            autocomplete="off">
                        <button onclick="Dashboard.clearSearch()" class="absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-red-500 text-lg font-bold" title="Clear">‚úï</button>
                    </div>
                    <!-- Search Results (overlay on charts) -->
                    <div id="searchResults" class="hidden absolute left-0 right-0 top-full mt-1 bg-white border-2 border-blue-400 rounded-xl shadow-2xl max-h-96 overflow-y-auto" style="z-index: 9999;">
                        <div class="text-slate-400 py-3 text-xs text-center">Digita almeno 2 caratteri...</div>
                    </div>
                </div>
                
                <!-- Charts Section -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow">
                        <canvas id="chartByType" height="280"></canvas>
                    </div>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow">
                        <canvas id="chartByStatus" height="280"></canvas>
                    </div>
                    <div class="bg-white border border-slate-200 rounded-xl p-4 shadow-lg hover:shadow-xl transition-shadow">
                        <canvas id="chartByRoom" height="280"></canvas>
                    </div>
                </div>
                
                <!-- Footer -->
                <div class="mt-auto pt-3 border-t border-slate-200 text-center">
                    <p class="text-slate-600 text-xs">
                        <span class="font-semibold">Tiesse Matrix Network</span> ¬© 2026 Tiesse S.P.A. ‚Äî All rights reserved ‚Äî <span class="text-red-500 font-medium">‚ö†Ô∏è Confidential ‚Äî For internal use only</span>
                    </p>
                </div>
            </div>
            
            <!-- Tab 1: Devices -->
            <div id="content-devices" class="tab-content">
                <!-- Add Device Form -->
                <div class="edit-mode-only bg-slate-50 rounded-lg p-3 mb-4" style="display:none;">
                    <h2 class="text-lg font-bold text-slate-800 mb-3">+ Add Device</h2>
                    <input type="hidden" id="deviceEditId" value="">
                    <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 xl:grid-cols-12 gap-2 items-end">
                        <div class="col-span-2">
                            <label class="text-xs text-slate-600 mb-1 block" for="deviceLocation">üìç Location *</label>
                            <div class="flex gap-1">
                                <select id="deviceLocation" class="flex-1 px-2 py-1.5 border-2 border-slate-400 rounded-lg focus:ring-2 focus:ring-slate-500 text-xs bg-slate-50 font-semibold text-slate-800" aria-label="Device location" aria-required="true">
                                    <option value="">üìç Select Location...</option>
                                </select>
                                <button type="button" onclick="openLocationManager()" title="Manage Locations" 
                                    class="px-2 py-1 bg-purple-100 hover:bg-purple-200 text-purple-700 rounded-lg text-xs font-bold transition-colors">‚öôÔ∏è</button>
                            </div>
                        </div>
                        <div class="col-span-1">
                            <!-- rackId nel codice, label visuale 'Group' per rack/uffici/sale/zone -->
                            <label class="text-xs text-slate-600 mb-1 block" for="rackId">üóÇÔ∏è Group *</label>
                            <input type="text" id="rackId" list="rackIdList" placeholder="Rack1, Standalone" 
                                class="w-full px-3 py-1.5 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-xs" aria-label="Device group or rack" aria-required="true">
                            <datalist id="rackIdList"></datalist>
                        </div>
                        <div class="col-span-1">
                            <label class="text-xs text-slate-600 mb-1 block text-center" for="deviceOrder">üî¢ Order *</label>
                            <div class="flex gap-1 items-center justify-center">
                                <input type="text" id="deviceOrder" placeholder="00" value="00" maxlength="2"
                                    class="w-10 px-1 py-1.5 border-2 border-blue-400 rounded-lg focus:ring-2 focus:ring-blue-500 text-center text-xs"
                                    onchange="formatDeviceOrder()" oninput="formatDeviceOrder()">
                                <div class="flex flex-col gap-0">
                                    <button type="button" onclick="adjustDeviceOrder(1)" class="px-1.5 py-0 text-[10px] bg-slate-200 hover:bg-slate-300 rounded-t border border-slate-300 leading-none h-3">‚ñ≤</button>
                                    <button type="button" onclick="adjustDeviceOrder(-1)" class="px-1.5 py-0 text-[10px] bg-slate-200 hover:bg-slate-300 rounded-b border border-t-0 border-slate-300 leading-none h-3">‚ñº</button>
                                </div>
                                <label class="flex items-center gap-0.5 px-1.5 py-1 bg-amber-50 border border-amber-300 rounded-lg cursor-pointer hover:bg-amber-100" title="Check if device is on back/rear of rack">
                                    <input type="checkbox" id="deviceRear" class="w-3 h-3 rounded border-amber-400 text-amber-600" onchange="toggleRearOrder()">
                                    <span class="text-xs font-bold text-amber-700">R</span><span class="text-[10px] text-amber-600">‚Ü©</span>
                                </label>
                            </div>
                        </div>
                        <div class="col-span-2">
                            <label class="text-xs text-slate-600 mb-1 block" for="deviceName">üìü Device Name *</label>
                            <input type="text" id="deviceName" placeholder="Router-GW, SW-Core" 
                                maxlength="100" required
                                class="w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 text-xs" aria-label="Device name" aria-required="true">
                        </div>
                        <div class="col-span-2">
                            <label class="text-xs text-slate-600 mb-1 block" for="deviceBrandModel">üîß Brand/Model</label>
                            <input type="text" id="deviceBrandModel" placeholder="HPE Aruba 2930F" 
                                maxlength="100"
                                class="w-full px-3 py-1.5 border border-slate-300 rounded-lg text-xs" aria-label="Device brand and model">
                        </div>
                        <div class="col-span-1">
                            <label class="text-xs text-slate-600 mb-1 block" for="deviceType">üè∑Ô∏è Type</label>
                            <select id="deviceType" class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs" aria-label="Device type">
                                <option value="router">üì° Router</option>
                                <option value="switch">üîÄ Switch</option>
                                <option value="patch">üìå Patch Panel</option>
                                <option value="walljack">üîå Wall Jack</option>
                                <option value="firewall">üõ°Ô∏è Firewall</option>
                                <option value="server">üñ•Ô∏è Server</option>
                                <option value="wifi">üì∂ WiFi AP</option>
                                <option value="isp">üåê ISP/Provider</option>
                                <option value="router_wifi">üì∂ Router WiFi</option>
                                <option value="modem">üì† Modem</option>
                                <option value="hub">üîò Hub</option>
                                <option value="pc">üíª PC/Desktop</option>
                                <option value="tablet">üì± Tablet</option>
                                <option value="ip_phone">üìû IP Phone</option>
                                <option value="printer">üñ®Ô∏è Printer</option>
                                <option value="nas">üóÑÔ∏è NAS/Storage</option>
                                <option value="camera">üìπ IP Camera</option>
                                <option value="ups">üîã UPS</option>
                                <option value="tv">üì∫ TV/Display</option>
                                <option value="others">üì¶ Others</option>
                            </select>
                        </div>
                        <div class="col-span-1">
                            <label class="text-xs text-slate-600 mb-1 block">‚ö° Status</label>
                            <select id="deviceStatus" class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                                <option value="active">Active</option>
                                <option value="disabled">Disabled</option>
                            </select>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-2 mt-2">
                        <div>
                            <label class="text-xs text-slate-600 mb-1 block">‚öôÔ∏è Service</label>
                            <input type="text" id="deviceService" placeholder="DHCP, DNS, Gateway" 
                                class="w-full px-3 py-1.5 border border-slate-300 rounded-lg text-xs">
                        </div>
                        <div class="border border-green-200 rounded-lg p-2 bg-green-50">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-xs font-bold text-green-700">üåê IP Addresses</h3>
                                <button onclick="addIPField()" type="button"
                                    class="text-xs font-semibold text-green-600 hover:text-green-800 bg-green-100 hover:bg-green-200 px-2 py-0.5 rounded transition-colors">+ Add IP</button>
                            </div>
                            <div id="deviceIPContainer" class="space-y-1 max-h-32 overflow-y-auto">
                                <div class="flex gap-1 items-center ip-row">
                                    <input type="text" class="ip-field flex-1 px-2 py-1 border border-green-300 rounded text-xs font-mono bg-white" placeholder="192.168.1.1/24">
                                    <select class="ip-zone px-1 py-1 border border-green-300 rounded text-xs bg-white" title="Network Zone">
                                        <option value="">-- Zone --</option>
                                        <option value="LAN">üè¢ LAN</option>
                                        <option value="WAN">üåê WAN</option>
                                        <option value="DMZ">üõ°Ô∏è DMZ</option>
                                        <option value="VLAN">üìä VLAN</option>
                                        <option value="Backbone">üîó Backbone</option>
                                        <option value="VPN">üîí VPN</option>
                                        <option value="Cloud">‚òÅÔ∏è Cloud</option>
                                        <option value="Guest">üë• Guest</option>
                                        <option value="IoT">üì° IoT</option>
                                        <option value="Servers">üñ•Ô∏è Servers</option>
                                        <option value="Management">‚öôÔ∏è Mgmt</option>
                                        <option value="Voice">üìû Voice</option>
                                    </select>
                                    <button type="button" onclick="removeIPField(this)" class="text-red-500 hover:text-red-700 font-bold px-1">‚úï</button>
                                </div>
                            </div>
                        </div>
                        <div class="border border-blue-200 rounded-lg p-2 bg-blue-50">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="text-xs font-bold text-blue-700">üîå Port Configuration</h3>
                                <button onclick="addPortTypeField()" type="button"
                                    class="text-xs font-semibold text-blue-600 hover:text-blue-800 bg-blue-100 hover:bg-blue-200 px-2 py-0.5 rounded transition-colors">+ Add Port Type</button>
                            </div>
                            <div id="portTypeQuantityContainer" class="space-y-1 max-h-48 overflow-y-auto"></div>
                        </div>
                        <div class="border border-purple-200 rounded-lg p-2 bg-purple-50">
                            <div class="flex items-center justify-between mb-1">
                                <h3 class="text-xs font-bold text-purple-700">üîó Links</h3>
                                <button onclick="addLinkField()" type="button"
                                    class="text-xs font-semibold text-purple-600 hover:text-purple-800 bg-purple-100 hover:bg-purple-200 px-2 py-0.5 rounded transition-colors">+ Add Link</button>
                            </div>
                            <div id="deviceLinksContainer" class="space-y-1 max-h-32 overflow-y-auto"></div>
                        </div>
                    </div>
                    <div class="flex flex-wrap gap-2 mt-2 items-end">
                        <div class="flex-1 min-w-[200px]">
                            <label class="text-xs text-slate-600 mb-1 block">üìù Notes</label>
                            <input type="text" id="deviceNotes" placeholder="Notes (optional)"
                                maxlength="500"
                                class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                        </div>
                        <button onclick="saveDevice()" 
                            class="bg-green-500 hover:bg-green-600 text-white font-semibold py-1.5 px-4 rounded-lg text-xs" id="saveDeviceButton">
                            + Add
                        </button>
                        <button onclick="cancelDeviceEdit()" id="cancelDeviceButton"
                            class="hidden bg-orange-400 hover:bg-orange-500 text-white font-semibold py-1.5 px-3 rounded-lg text-xs">
                            Cancel
                        </button>
                        <button onclick="clearDeviceForm()" 
                            class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-1.5 px-3 rounded-lg text-xs">
                            Clear
                        </button>
                    </div>
                </div>

                <!-- Devices List -->
                <div class="flex items-center justify-between gap-4 mb-3">
                    <!-- Left: Title + Subtitle -->
                    <div>
                        <h2 class="text-lg font-bold text-slate-800">üì± Devices List</h2>
                        <p class="text-xs text-slate-500 italic">Aggiungi, modifica o rimuovi dispositivi di rete Tiesse.</p>
                    </div>
                    <!-- Right: View Options -->
                    <div class="flex items-center gap-2">
                        <span class="text-sm text-slate-500">View:</span>
                        <button onclick="setDeviceView('cards')" id="deviceViewCards" class="px-2 py-1 text-xs font-semibold rounded bg-slate-200 text-slate-700 hover:bg-slate-300">
                            üÉè Cards
                        </button>
                        <button onclick="setDeviceView('table')" id="deviceViewTable" class="px-2 py-1 text-xs font-semibold rounded bg-blue-500 text-white">
                            üìã Table
                        </button>
                        <button onclick="printDevices()" class="no-print px-2 py-1 text-xs font-semibold rounded bg-slate-500 text-white hover:bg-slate-600">
                            üñ®Ô∏è Print
                        </button>
                    </div>
                </div>
                    <!-- Filter Bar for Devices -->
                    <div id="deviceFilterBar">
                        <!-- Filters will be populated by JS -->
                    </div>
                    <div class="overflow-x-auto" id="devicesListContainer">
                        <div class="text-center text-slate-500 py-8">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: Active Connections (with connection form) -->
            <div id="content-active" class="tab-content">
                <!-- Connection Form -->
                <div class="edit-mode-only bg-slate-50 rounded-lg p-3 mb-4" style="display:none;">
                    <h2 class="text-lg font-bold text-slate-800 mb-3" id="connectionFormTitle">+ Add Connection</h2>
                    <input type="hidden" id="connEditIndex" value="">
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-3 mb-3">
                        <!-- SOURCE Section -->
                        <div class="bg-orange-100 border border-orange-300 rounded-lg p-2">
                            <p class="text-xs font-bold text-orange-700 mb-2">üì§ SOURCE</p>
                            <div class="grid grid-cols-4 gap-2">
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üìç Location</label>
                                    <select id="fromLocation" onchange="updateFromGroups()" 
                                        class="w-full px-2 py-1.5 border-2 border-slate-400 rounded-lg text-xs bg-slate-50 font-semibold text-slate-800">
                                        <option value="">üìç All</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üóÇÔ∏è Group</label>
                                    <select id="fromGroup" onchange="updateFromDevices()" 
                                        class="w-full px-2 py-1.5 border border-orange-300 rounded-lg text-xs bg-white">
                                        <option value="">All</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üìü Device *</label>
                                    <select id="fromDevice" onchange="updateFromPorts()" 
                                        class="w-full px-2 py-1.5 border-2 border-orange-400 rounded-lg text-xs bg-white font-medium">
                                        <option value="">Select Device...</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üîå Port *</label>
                                    <select id="fromPort" class="w-full px-2 py-1.5 border-2 border-orange-400 rounded-lg text-xs bg-white font-medium">
                                        <option value="">Select Port...</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- DESTINATION Section -->
                        <div class="bg-amber-50 border border-amber-300 rounded-lg p-2">
                            <p class="text-xs font-bold text-amber-700 mb-2">üì• DESTINATION</p>
                            <div class="grid grid-cols-4 gap-2">
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üìç Location</label>
                                    <select id="toLocation" onchange="updateToGroups()" 
                                        class="w-full px-2 py-1.5 border-2 border-slate-400 rounded-lg text-xs bg-slate-50 font-semibold text-slate-800">
                                        <option value="">üìç All</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üóÇÔ∏è Group</label>
                                    <select id="toGroup" onchange="updateToDevices()" 
                                        class="w-full px-2 py-1.5 border border-amber-300 rounded-lg text-xs bg-white">
                                        <option value="">All</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="text-xs text-slate-600 mb-1 block">üìü Device *</label>
                                    <select id="toDevice" onchange="updateToPorts(); toggleExternalDest()" 
                                        class="w-full px-2 py-1.5 border-2 border-amber-400 rounded-lg text-xs bg-white font-medium">
                                        <option value="">Select Device...</option>
                                    </select>
                                </div>
                                <div id="toPortContainer">
                                    <label class="text-xs text-slate-600 mb-1 block">üîå Port *</label>
                                    <select id="toPort" class="w-full px-2 py-1.5 border-2 border-amber-400 rounded-lg text-xs bg-white font-medium">
                                        <option value="">Select Port...</option>
                                    </select>
                                </div>
                            </div>
                            <div class="hidden mt-2" id="externalDestContainer">
                                <div class="grid gap-2">
                                    <div>
                                        <label class="text-xs text-slate-600 mb-1 block" id="externalDestLabel">üîå Wall Jack ID / üåê ISP</label>
                                        <input type="text" id="externalDest" placeholder="Z1, Z2, Z3..."
                                            class="w-full px-2 py-1.5 border-2 border-slate-400 rounded-lg text-xs bg-white">
                                    </div>
                                    <div id="wallJackRoomContainer" class="hidden">
                                        <label class="text-xs text-slate-600 mb-1 block">üè† Room</label>
                                        <select id="wallJackRoomId" onchange="updateConnectionUI('room')" class="w-full px-2 py-1.5 border-2 border-slate-400 rounded-lg text-xs bg-white text-slate-800" aria-label="Select room for wall jack">
                                            <option value="">(No Room)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Connection Details + Notes + Buttons -->
                    <div class="flex flex-wrap gap-2 items-end">
                        <div class="w-32">
                            <label class="text-xs text-slate-600 mb-1 block">üè∑Ô∏è Type</label>
                            <select id="connType" class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                                <option value="lan">‚ÜîÔ∏è LAN</option>
                                <option value="wan">üåê WAN/Internet</option>
                                <option value="dmz">üõ°Ô∏è DMZ</option>
                                <option value="trunk">‚¨ÜÔ∏è Trunk/Uplink</option>
                                <option value="management">‚öôÔ∏è Management</option>
                                <option value="backup">üíæ Backup</option>
                                <option value="fiber">üí° Fiber Optic</option>
                                <option value="wallport">üîå Wall Jack</option>
                                <option value="external">üì° External/ISP</option>
                                <option value="other">üì¶ Other</option>
                            </select>
                        </div>
                        <div class="w-24">
                            <label class="text-xs text-slate-600 mb-1 block">‚ö° Status</label>
                            <select id="connStatus" class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                                <option value="active">Active</option>
                                <option value="disabled">Disabled</option>
                            </select>
                        </div>
                        <div class="w-20">
                            <label class="text-xs text-slate-600 mb-1 block">üîñ Cable ID</label>
                            <input type="text" id="cableMarker" maxlength="5" placeholder="1, A"
                                class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs text-center">
                        </div>
                        <div class="w-32">
                            <label class="text-xs text-slate-600 mb-1 block">üé® Color</label>
                            <div class="flex gap-1">
                                <select id="cableColor" onchange="syncCableColorInput()" class="flex-1 px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                                    <option value="">No Color</option>
                                    <option value="#000000" style="background:#000000;color:#fff;">Black</option>
                                    <option value="#ffffff" style="background:#ffffff;color:#000;border:1px solid #ccc;">White</option>
                                    <option value="#ef4444" style="background:#ef4444;color:#fff;">Red</option>
                                    <option value="#f97316" style="background:#f97316;color:#fff;">Orange</option>
                                    <option value="#eab308" style="background:#eab308;color:#000;">Yellow</option>
                                    <option value="#8b4513" style="background:#8b4513;color:#fff;">Brown</option>
                                    <option value="#22c55e" style="background:#22c55e;color:#fff;">Green</option>
                                    <option value="#3b82f6" style="background:#3b82f6;color:#fff;">Blue</option>
                                    <option value="#a855f7" style="background:#a855f7;color:#fff;">Purple</option>
                                    <option value="#ec4899" style="background:#ec4899;color:#fff;">Pink</option>
                                    <option value="#6b7280" style="background:#6b7280;color:#fff;">Gray</option>
                                    <option value="custom">Custom...</option>
                                </select>
                                <input type="color" id="cableColorPicker" onchange="syncCableColorFromPicker()" 
                                    class="w-8 h-8 p-0 border border-slate-300 rounded cursor-pointer" title="Custom color">
                            </div>
                        </div>
                        <div class="flex-1 min-w-[200px]">
                            <label class="text-xs text-slate-600 mb-1 block">üìù Notes</label>
                            <input type="text" id="connNotes" placeholder="Notes (optional)"
                                maxlength="500"
                                class="w-full px-2 py-1.5 border border-slate-300 rounded-lg text-xs">
                        </div>
                        <div class="flex gap-2">
                            <button onclick="saveConnection()" 
                                class="bg-green-500 hover:bg-green-600 text-white font-semibold py-1.5 px-4 rounded-lg text-xs whitespace-nowrap" id="saveConnectionButton">
                                + Add
                            </button>
                            <button onclick="cancelConnectionEdit()" id="cancelConnectionButton"
                                class="hidden bg-orange-400 hover:bg-orange-500 text-white font-semibold py-1.5 px-3 rounded-lg text-xs">
                                Cancel
                            </button>
                            <button onclick="clearConnectionForm()" 
                                class="bg-slate-400 hover:bg-slate-500 text-white font-semibold py-1.5 px-3 rounded-lg text-xs">
                                Clear
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Connections List -->
                <div id="connectionsPrintArea">
                    <div class="flex items-center justify-between gap-4 mb-3">
                        <!-- Left: Title + Subtitle -->
                        <div>
                            <h2 class="text-lg font-bold text-slate-800">‚ö° Active Connections</h2>
                            <p class="text-xs text-slate-500 italic">Crea e gestisci le connessioni tra dispositivi.</p>
                        </div>
                        <!-- Right: Print Button -->
                        <button onclick="printConnections()" class="no-print bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1 px-3 rounded-lg text-xs">
                            üñ®Ô∏è Print List
                        </button>
                    </div>
                    <!-- Filter Bar for Connections -->
                    <div id="connFilterBar">
                        <!-- Filters will be populated by JS -->
                    </div>
                    <div id="connectionsListContainer">
                        <div class="text-center text-slate-500 py-8">Loading...</div>
                    </div>
                </div>
            </div>

            <!-- Tab 3: Matrix (Refactored - Topology Style) -->
            <div id="content-matrix" class="tab-content">
                <div id="matrixPrintArea">
                    <!-- Header with title -->
                    <div class="flex items-center gap-3 mb-1">
                        <h2 class="text-xl font-bold text-slate-800">üìä Connection Matrix</h2>
                        <div id="matrixStats" class="no-print">
                            <!-- Stats populated by JS -->
                        </div>
                    </div>
                    <!-- Subtitle + Controls (same line) -->
                    <div class="flex items-center justify-between gap-4 mb-4 flex-wrap">
                        <p class="text-xs text-slate-500 italic">Matrici visiva di tutte le connessioni.</p>
                        <!-- Right: Controls -->
                        <div class="flex items-center gap-2 flex-wrap no-print">
                            <!-- Filters -->
                            <select id="matrixLocationFilter" onchange="filterMatrixByLocation()" class="px-2 py-1 border-2 border-slate-400 rounded-lg text-sm bg-slate-50 font-semibold text-slate-800">
                                <option value="">üìç All Locations</option>
                            </select>
                            <select id="matrixGroupFilter" onchange="filterMatrixByGroup()" class="px-2 py-1 border border-slate-300 rounded-lg text-sm">
                                <option value="">üóÇÔ∏è All Groups</option>
                            </select>
                            <label class="flex items-center gap-1.5 cursor-pointer bg-green-50 border border-green-300 rounded-lg px-2 py-1" title="Hide devices without connections">
                                <input type="checkbox" id="matrixOnlyConnected" onchange="toggleMatrixOnlyConnected()" checked class="w-3.5 h-3.5 accent-green-600">
                                <span class="text-xs text-green-700 font-medium">Connected</span>
                            </label>
                            
                            <!-- Zoom Controls -->
                            <div class="flex items-center gap-1 border-l border-slate-300 pl-2">
                                <button onclick="zoomMatrix(-1)" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-1 px-2 rounded text-sm" title="Zoom Out">‚àí</button>
                                <span id="matrixZoomLevel" class="text-xs text-slate-600 font-mono w-10 text-center">100%</span>
                                <button onclick="zoomMatrix(1)" class="bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold py-1 px-2 rounded text-sm" title="Zoom In">+</button>
                                <button onclick="fitMatrixView()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2.5 rounded text-sm" title="Fit to View">üìä Fit</button>
                            </div>
                            
                            <!-- Actions -->
                            <div class="flex items-center gap-1 border-l border-slate-300 pl-2">
                                <button onclick="exportMatrixPNG()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" title="Export as PNG">üì∑ PNG</button>
                                <button onclick="printMatrix()" class="bg-slate-600 hover:bg-slate-700 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" title="Print">üñ®Ô∏è Print</button>
                            </div>
                        </div>
                    </div>

                    <!-- Matrix Container - SVG based with native zoom/pan -->
                    <div class="overflow-hidden rounded-xl border border-slate-200 bg-gradient-to-br from-slate-50 to-slate-100 shadow-sm" 
                         id="matrixContainer" 
                         style="height: 600px; width: 100%; position: relative; cursor: grab;">
                        <div class="text-center text-slate-500 py-8">Loading...</div>
                    </div>

                    <!-- Tip - Compact version -->
                    <p class="mt-2 text-xs text-blue-600 no-print">üí° Scroll to zoom ‚Ä¢ Drag to pan ‚Ä¢ Click cell to edit ‚Ä¢ Headers stay fixed</p>

                    <!-- Tooltip container for hover details -->
                    <div id="matrixTooltip" class="fixed hidden z-50 bg-slate-800 text-white text-sm rounded-xl shadow-2xl p-4 pointer-events-none" style="min-width:420px;max-width:500px;">
                        <!-- Tooltip content populated by JS -->
                    </div>
                </div>
            </div>

            <!-- Tab 4: Floor Plan -->
            <div id="content-floorplan" class="tab-content">
                <!-- Header with title -->
                <div class="flex items-center gap-3 mb-1">
                    <h2 class="text-xl font-bold text-slate-800">üè¢ Floor Plan</h2>
                    <div id="floorplanStats" class="flex items-center gap-2 text-xs">
                        <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded font-semibold">
                            üìç <span id="totalRoomsCount">0</span> Rooms
                        </span>
                    </div>
                </div>
                <!-- Subtitle + Controls (same line) -->
                <div class="flex items-center justify-between gap-4 mb-4 flex-wrap">
                    <p class="text-xs text-slate-500 italic">Mappa fisica della posizione degli equipaggiamenti.</p>
                    <!-- Right: Controls -->
                    <div class="flex items-center gap-2 flex-wrap">
                        <!-- Zoom Controls -->
                        <div class="flex items-center gap-1">
                            <button onclick="FloorPlan.zoom(-0.2)" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-1 px-2.5 rounded text-sm">‚àí</button>
                            <span id="floorplanZoomLevel" class="text-sm font-semibold text-slate-700 min-w-12 text-center">100%</span>
                            <button onclick="FloorPlan.zoom(0.2)" class="bg-slate-500 hover:bg-slate-600 text-white font-bold py-1 px-2.5 rounded text-sm">+</button>
                            <button onclick="FloorPlan.resetZoom()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2.5 rounded text-sm ml-1">Reset</button>
                        </div>
                        
                        <!-- Room Management (Edit Mode Only) -->
                        <div class="edit-mode-only flex items-center gap-1 border-l border-slate-300 pl-2" style="display:none;">
                            <button onclick="FloorPlan.showAddRoomModal()" class="bg-green-500 hover:bg-green-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm">+ Room</button>
                            <button onclick="FloorPlan.toggleEditMode()" class="bg-orange-500 hover:bg-orange-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" id="floorplanEditBtn">‚úèÔ∏è Edit</button>
                        </div>
                    </div>
                </div>

                <!-- Floor Plan Container Wrapper -->
                <div style="position: relative;">
                    <!-- Floor Plan Container -->
                    <div id="floorplanContainer" class="border border-slate-300 rounded-xl bg-gradient-to-br from-slate-50 to-slate-100" style="height: 600px; width: 100%; overflow: hidden; position: relative; cursor: grab;">
                        <div class="flex items-center justify-center h-full text-slate-400">
                            <p>Loading floor plan...</p>
                        </div>
                    </div>
                    <!-- Floating Custom Locations Legend (Left Side) -->
                    <div id="customLocationsLegend" style="position: absolute; top: 12px; left: 12px; max-height: calc(100% - 24px); overflow-y: auto; background: rgba(255,255,255,0.92); backdrop-filter: blur(4px); border-radius: 10px; padding: 10px 14px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 100; min-width: 140px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid #e2e8f0; padding-bottom: 6px;">
                            <span style="font-size: 11px; font-weight: 700; color: #059669;">ü™ß Custom Locations</span>
                            <button onclick="toggleCustomLocationsLegend()" id="customLocationsToggle" style="font-size: 9px; color: #059669; background: none; border: none; cursor: pointer; opacity: 0.7;">‚ñº</button>
                        </div>
                        <div id="customLocationsContent" style="display: flex; flex-direction: column; gap: 3px;"></div>
                    </div>
                    <!-- Floating Room Legend (Right Side) -->
                    <div id="roomLegend" style="position: absolute; top: 12px; right: 12px; max-height: calc(100% - 24px); overflow-y: auto; background: rgba(255,255,255,0.92); backdrop-filter: blur(4px); border-radius: 10px; padding: 10px 14px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 100; min-width: 140px;">
                        <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; border-bottom: 1px solid #e2e8f0; padding-bottom: 6px;">
                            <span style="font-size: 11px; font-weight: 700; color: #7c3aed;">üìç Mapped Rooms</span>
                            <button onclick="toggleRoomLegend()" id="roomLegendToggle" style="font-size: 9px; color: #7c3aed; background: none; border: none; cursor: pointer; opacity: 0.7;">‚ñº</button>
                        </div>
                        <div id="roomLegendContent" style="display: flex; flex-direction: column; gap: 3px;"></div>
                    </div>
                </div>

                <!-- Room Info Panel (Hidden by default) -->
                <div id="roomInfoPanel" class="mt-4 bg-white border border-slate-300 rounded-lg p-4" style="display:none;">
                    <div class="flex items-start justify-between mb-3">
                        <div>
                            <h3 class="text-lg font-bold text-slate-800" id="roomInfoName">Room Name</h3>
                            <p class="text-sm text-slate-600" id="roomInfoType">Type</p>
                        </div>
                        <button onclick="FloorPlan.closeRoomPanel()" class="text-slate-400 hover:text-slate-600">‚úï</button>
                    </div>
                    <div id="roomInfoContent" class="text-sm text-slate-700">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Tips -->
                <p class="mt-2 text-xs text-blue-600">üí° Click on rooms to view details ‚Ä¢ Drag to pan ‚Ä¢ Scroll to zoom ‚Ä¢ Edit Mode: manage rooms and place devices</p>
            </div>

            <!-- Tab 5: Help -->
            <div id="content-help" class="tab-content">
                <div class="max-w-6xl mx-auto">
                    
                    <!-- ========== HEADER ========== -->
                    <div class="text-center mb-6">
                        <h1 class="text-3xl font-bold text-slate-800 mb-2">üìö Guida Utente Completa</h1>
                        <p class="text-slate-600">TIESSE Matrix Network Manager v3.6.021</p>
                        <p class="text-slate-500 text-sm mt-1">Documentazione completa per utenti e amministratori di sistema</p>
                        <div class="flex justify-center gap-2 mt-3">
                            <span class="bg-blue-100 text-blue-800 text-xs px-3 py-1 rounded-full">Guida Operativa</span>
                            <span class="bg-green-100 text-green-800 text-xs px-3 py-1 rounded-full">Manuale Tecnico</span>
                            <span class="bg-purple-100 text-purple-800 text-xs px-3 py-1 rounded-full">Installazione</span>
                        </div>
                    </div>

                    <!-- ========== INDICE NAVIGABILE ========== -->
                    <div class="bg-gradient-to-r from-slate-800 to-slate-700 text-white rounded-xl p-5 mb-6 shadow-lg" id="help-index">
                        <h2 class="text-lg font-bold mb-4 flex items-center gap-2">üìë Indice della Guida</h2>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm">
                            <a href="#help-intro" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-blue-300">0.</span> Introduzione e Concetti Base
                            </a>
                            <a href="#help-interface" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-sky-300">1.</span> üñ•Ô∏è Interfaccia Utente
                            </a>
                            <a href="#help-auth" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-green-300">2.</span> üîê Autenticazione e Permessi
                            </a>
                            <a href="#help-devices" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-purple-300">3.</span> üì± Scheda Devices
                            </a>
                            <a href="#help-connections" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-orange-300">4.</span> ‚ö° Scheda Connections
                            </a>
                            <a href="#help-topology" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-cyan-300">5.</span> üó∫Ô∏è Scheda Topology
                            </a>
                            <a href="#help-matrix" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-pink-300">6.</span> üìä Scheda Matrix
                            </a>
                            <a href="#help-floorplan" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-emerald-300">7.</span> üè¢ Scheda Floor Plan
                            </a>
                            <a href="#help-logs" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-amber-300">8.</span> üìã Scheda Logs
                            </a>
                            <a href="#help-export" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-red-300">9.</span> üíæ Import/Export e Backup
                            </a>
                            <a href="#help-locations" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-violet-300">10.</span> üìç Location Manager
                            </a>
                            <a href="#help-print" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-rose-300">11.</span> üñ®Ô∏è Stampa e Esportazione PNG
                            </a>
                            <a href="#help-workflow" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-yellow-300">12.</span> üîÑ Flusso di Lavoro
                            </a>
                            <a href="#help-glossary" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-indigo-300">13.</span> üìñ Glossario Termini
                            </a>
                            <a href="#help-faq" class="block bg-white/10 hover:bg-white/20 rounded-lg p-3 transition-colors">
                                <span class="font-bold text-teal-300">14.</span> ‚ùì FAQ
                            </a>
                            <a href="#help-install" class="block bg-gradient-to-r from-orange-500/30 to-red-500/30 hover:from-orange-500/50 hover:to-red-500/50 rounded-lg p-3 transition-colors border border-orange-400/50">
                                <span class="font-bold text-orange-300">15.</span> üõ†Ô∏è Installazione del Sistema
                            </a>
                        </div>
                    </div>

                    <!-- ========== 0. INTRODUZIONE ========== -->
                    <div class="bg-blue-50 border-l-4 border-blue-500 rounded-r-xl p-5 mb-6" id="help-intro">
                        <h2 class="text-xl font-bold text-blue-800 mb-3 flex items-center gap-2">
                            <span class="bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">0</span>
                            Introduzione e Concetti Base
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-blue-200">
                                <h3 class="font-bold text-blue-900 mb-2">üéØ Cos'√® TIESSE Matrix Network?</h3>
                                <p class="text-blue-800 text-sm mb-3">TIESSE Matrix Network √® un'applicazione web progettata per <strong>documentare e visualizzare</strong> l'infrastruttura di rete aziendale. √à pensata per tecnici di rete, amministratori di sistema e personale IT che hanno bisogno di mantenere una documentazione aggiornata della rete.</p>
                                
                                <div class="bg-blue-50 rounded-lg p-3 mb-3">
                                    <p class="font-semibold text-blue-900 text-sm mb-2">üìå Cosa puoi fare con Matrix Network:</p>
                                    <ul class="text-blue-700 text-sm ml-4 list-disc space-y-1">
                                        <li><strong>Catalogare dispositivi:</strong> Router, switch, server, access point, PC, stampanti, telecamere IP, UPS e qualsiasi apparecchiatura di rete</li>
                                        <li><strong>Documentare connessioni:</strong> Registrare ogni cavo che collega un dispositivo a un altro, con porta di origine e destinazione</li>
                                        <li><strong>Visualizzare la topologia:</strong> Vedere un diagramma grafico interattivo di tutta la rete</li>
                                        <li><strong>Organizzare per sede:</strong> Raggruppare dispositivi per Location (sede/edificio) e Group (rack/stanza)</li>
                                        <li><strong>Mappare planimetrie:</strong> Associare dispositivi a stanze fisiche nel Floor Plan</li>
                                        <li><strong>Esportare documentazione:</strong> Generare report Excel, backup JSON, immagini PNG e file per Draw.io</li>
                                        <li><strong>Stampare inventari:</strong> Stampare elenchi di dispositivi e connessioni filtrati per sede</li>
                                    </ul>
                                </div>

                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-3">
                                    <p class="text-amber-800 text-sm">‚ö†Ô∏è <strong>Importante:</strong> Matrix Network √® un sistema di <u>documentazione</u>, non di monitoraggio. Non rileva automaticamente i dispositivi n√© verifica se sono online. I dati vengono inseriti e aggiornati manualmente dagli operatori.</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-blue-200">
                                <h3 class="font-bold text-blue-900 mb-2">üèóÔ∏è Struttura Gerarchica dei Dati</h3>
                                <p class="text-blue-800 text-sm mb-3">I dati sono organizzati in una gerarchia logica che riflette l'organizzazione fisica della rete:</p>
                                <div class="bg-slate-800 rounded-lg p-4 font-mono text-sm text-green-400 mb-3">
<pre>üìç <span class="text-yellow-300">LOCATION</span> (Sede/Edificio/Reparto)
 ‚îÇ   Esempio: "Sede Centrale", "Filiale Torino", "Magazzino"
 ‚îÇ
 ‚îî‚îÄ‚îÄ üóÇÔ∏è <span class="text-cyan-300">GROUP</span> (Rack/Stanza/Armadio/Zona)
      ‚îÇ   Esempio: "Rack-01", "Sala Server", "Ufficio Direzione"
      ‚îÇ
      ‚îî‚îÄ‚îÄ üì± <span class="text-pink-300">DEVICE</span> (Dispositivo di rete)
           ‚îÇ   Esempio: "SW-Core-01", "Router-Gateway", "Server-DC"
           ‚îÇ
           ‚îú‚îÄ‚îÄ üîå <span class="text-orange-300">PORTS</span> (Porte fisiche del dispositivo)
           ‚îÇ   Esempio: 24 porte Ethernet + 4 porte SFP
           ‚îÇ
           ‚îî‚îÄ‚îÄ ‚ö° <span class="text-blue-300">CONNECTIONS</span> (Cavi collegati)
               Esempio: SW-Core-01 Porta 24 ‚ü∑ SW-Piano2 Porta 1

<span class="text-slate-400">‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ</span>

üè¢ <span class="text-emerald-300">FLOOR PLAN</span> (Planimetria dell'edificio)
 ‚îÇ
 ‚îî‚îÄ‚îÄ üö™ <span class="text-violet-300">ROOM</span> (Stanza fisica)
      ‚îÇ   Ha: ID, Nickname, Poligono, Colore
      ‚îÇ
      ‚îî‚îÄ‚îÄ üì± <span class="text-pink-300">DEVICES</span> (Dispositivi associati)
          (collegati tramite Location = Nickname)</pre>
                                </div>
                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                                        <span class="font-bold text-yellow-900">üìç Location</span>
                                        <p class="text-yellow-800 mt-1">Rappresenta una sede fisica, un edificio o un reparto. √à il livello pi√π alto di organizzazione. Tutti i dispositivi devono appartenere a una Location.</p>
                                    </div>
                                    <div class="bg-cyan-50 p-3 rounded-lg border border-cyan-200">
                                        <span class="font-bold text-cyan-900">üóÇÔ∏è Group</span>
                                        <p class="text-cyan-800 mt-1">Rappresenta un raggruppamento all'interno della Location: rack, armadio, stanza, area. Permette di organizzare dispositivi vicini fisicamente.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-blue-200">
                                <h3 class="font-bold text-blue-900 mb-2">üîÑ Come Funziona il Sistema</h3>
                                <div class="grid md:grid-cols-3 gap-3 text-xs">
                                    <div class="bg-slate-50 p-3 rounded-lg text-center">
                                        <div class="text-3xl mb-2">üìù</div>
                                        <span class="font-bold text-slate-800">1. Inserimento</span>
                                        <p class="text-slate-600 mt-1">Aggiungi dispositivi con tutte le informazioni: nome, tipo, IP, porte disponibili</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg text-center">
                                        <div class="text-3xl mb-2">üîó</div>
                                        <span class="font-bold text-slate-800">2. Collegamento</span>
                                        <p class="text-slate-600 mt-1">Crea connessioni specificando: da quale dispositivo/porta a quale dispositivo/porta</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg text-center">
                                        <div class="text-3xl mb-2">üëÅÔ∏è</div>
                                        <span class="font-bold text-slate-800">3. Visualizzazione</span>
                                        <p class="text-slate-600 mt-1">Consulta topologia, matrice, planimetria. Esporta e stampa documentazione</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-blue-200">
                                <h3 class="font-bold text-blue-900 mb-2">üíæ Salvataggio dei Dati</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-green-50 p-3 rounded-lg border-l-4 border-green-500">
                                        <span class="font-bold text-green-800">‚úÖ Dove vengono salvati?</span>
                                        <p class="text-green-700 text-xs mt-1">I dati sono salvati in un file JSON sul server (<code class="bg-green-200 px-1 rounded">data/network_manager.json</code>). Quando clicchi "Save Now", il browser invia i dati al server che li scrive nel file.</p>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border-l-4 border-red-500">
                                        <span class="font-bold text-red-800">‚ö†Ô∏è Attenzione!</span>
                                        <p class="text-red-700 text-xs mt-1">Le modifiche NON vengono salvate automaticamente! Devi sempre cliccare <span class="bg-green-600 text-white px-2 py-0.5 rounded text-xs">üíæ Save Now</span> dopo ogni sessione di modifiche.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-blue-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 1. INTERFACCIA UTENTE ========== -->
                    <div class="bg-sky-50 border-l-4 border-sky-500 rounded-r-xl p-5 mb-6" id="help-interface">
                        <h2 class="text-xl font-bold text-sky-800 mb-3 flex items-center gap-2">
                            <span class="bg-sky-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">1</span>
                            üñ•Ô∏è Interfaccia Utente
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-sky-200">
                                <h3 class="font-bold text-sky-900 mb-3">üñºÔ∏è Layout della Pagina</h3>
                                <p class="text-sky-800 text-sm mb-3">L'interfaccia √® divisa in aree funzionali ben definite:</p>
                                
                                <div class="bg-slate-100 rounded-lg p-4 mb-3">
                                    <div class="border-2 border-slate-400 rounded-lg overflow-hidden">
                                        <!-- Header -->
                                        <div class="bg-white p-2 border-b-2 border-slate-400">
                                            <div class="flex justify-between items-center text-xs">
                                                <div class="flex items-center gap-2">
                                                    <span class="bg-blue-600 text-white px-2 py-1 rounded">LOGO</span>
                                                    <span class="font-bold">Matrix Network</span>
                                                </div>
                                                <div class="flex gap-2">
                                                    <span class="bg-blue-500 text-white px-2 py-0.5 rounded text-xs">üîì Edit Mode</span>
                                                    <span class="bg-slate-200 px-2 py-0.5 rounded text-xs">üìã</span>
                                                    <span class="text-slate-500 text-xs">v3.6.021</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Actions Bar -->
                                        <div class="bg-slate-50 p-2 border-b-2 border-slate-400">
                                            <div class="flex justify-between items-center text-xs">
                                                <div class="flex gap-2">
                                                    <span class="bg-orange-100 px-2 py-0.5 rounded border border-orange-300 text-xs">üìç Location Filter</span>
                                                    <span class="bg-blue-500 text-white px-2 py-0.5 rounded text-xs">üì± Devices</span>
                                                    <span class="bg-green-500 text-white px-2 py-0.5 rounded text-xs">‚ö° Connections</span>
                                                </div>
                                                <div class="flex gap-1">
                                                    <span class="bg-green-600 text-white px-1 py-0.5 rounded text-xs">üíæ</span>
                                                    <span class="bg-indigo-500 text-white px-1 py-0.5 rounded text-xs">üìä</span>
                                                    <span class="bg-slate-500 text-white px-1 py-0.5 rounded text-xs">üíæ</span>
                                                </div>
                                            </div>
                                        </div>
                                        <!-- Tabs -->
                                        <div class="bg-white p-1 border-b border-slate-300">
                                            <div class="flex gap-1 text-xs">
                                                <span class="bg-blue-100 px-2 py-1 rounded border-b-2 border-blue-500">üì± Devices</span>
                                                <span class="px-2 py-1">‚ö° Connections</span>
                                                <span class="px-2 py-1">üó∫Ô∏è Topology</span>
                                                <span class="px-2 py-1">üìä Matrix</span>
                                                <span class="px-2 py-1">üè¢ Floor Plan</span>
                                                <span class="px-2 py-1">‚ùì Help</span>
                                            </div>
                                        </div>
                                        <!-- Content -->
                                        <div class="bg-white p-4 text-center text-slate-400 text-xs h-24 flex items-center justify-center">
                                            [Contenuto della scheda attiva]
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-sky-200">
                                <h3 class="font-bold text-sky-900 mb-3">üìç Descrizione delle Aree</h3>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-xs">
                                        <thead class="bg-sky-100">
                                            <tr>
                                                <th class="px-3 py-2 text-left font-bold text-sky-900 w-1/4">Area</th>
                                                <th class="px-3 py-2 text-left font-bold text-sky-900">Descrizione</th>
                                                <th class="px-3 py-2 text-left font-bold text-sky-900">Elementi</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-sky-100">
                                            <tr class="bg-sky-50">
                                                <td class="px-3 py-2 font-semibold text-sky-800">üîù Header (Intestazione)</td>
                                                <td class="px-3 py-2 text-sky-700">Barra superiore sempre visibile con logo e controlli principali</td>
                                                <td class="px-3 py-2 text-sky-700">Logo Tiesse, titolo, pulsante Login/Logout, pulsante Logs, versione</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2 font-semibold text-sky-800">‚ö° Actions Bar</td>
                                                <td class="px-3 py-2 text-sky-700">Barra delle azioni rapide e filtri globali</td>
                                                <td class="px-3 py-2 text-sky-700">Filtro Location, contatori, pulsanti Export/Import, Save</td>
                                            </tr>
                                            <tr class="bg-sky-50">
                                                <td class="px-3 py-2 font-semibold text-sky-800">üìë Tab Navigation</td>
                                                <td class="px-3 py-2 text-sky-700">Schede per navigare tra le diverse sezioni</td>
                                                <td class="px-3 py-2 text-sky-700">Devices, Connections, Topology, Matrix, Floor Plan, Help</td>
                                            </tr>
                                            <tr>
                                                <td class="px-3 py-2 font-semibold text-sky-800">üìÑ Content Area</td>
                                                <td class="px-3 py-2 text-sky-700">Area principale che mostra il contenuto della scheda selezionata</td>
                                                <td class="px-3 py-2 text-sky-700">Varia in base alla scheda attiva</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-sky-200">
                                <h3 class="font-bold text-sky-900 mb-3">üîò Pulsanti dell'Header</h3>
                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="bg-blue-500 text-white px-2 py-1 rounded">üîì Edit Mode</span>
                                        </div>
                                        <p class="text-slate-700"><strong>Funzione:</strong> Apre il popup di login per accedere alla modalit√† di modifica.</p>
                                        <p class="text-slate-600 mt-1"><strong>Quando visibile:</strong> Sempre, se non sei autenticato.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="bg-slate-500 text-white px-2 py-1 rounded">üîí Logout</span>
                                        </div>
                                        <p class="text-slate-700"><strong>Funzione:</strong> Esce dalla modalit√† di modifica e torna in sola lettura.</p>
                                        <p class="text-slate-600 mt-1"><strong>Quando visibile:</strong> Solo dopo aver effettuato il login.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="bg-slate-200 text-slate-700 px-2 py-1 rounded">üìã</span>
                                        </div>
                                        <p class="text-slate-700"><strong>Funzione:</strong> Apre la scheda Activity Logs con lo storico delle modifiche.</p>
                                        <p class="text-slate-600 mt-1"><strong>Quando visibile:</strong> Sempre.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-2">
                                            <span class="text-slate-500 px-2 py-1 bg-slate-100 rounded">v3.6.021</span>
                                        </div>
                                        <p class="text-slate-700"><strong>Funzione:</strong> Mostra la versione corrente del sistema.</p>
                                        <p class="text-slate-600 mt-1"><strong>Quando visibile:</strong> Sempre.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-sky-200">
                                <h3 class="font-bold text-sky-900 mb-3">‚ö° Pulsanti della Barra Azioni</h3>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-xs">
                                        <thead class="bg-sky-100">
                                            <tr>
                                                <th class="px-2 py-2 text-left font-bold text-sky-900">Pulsante</th>
                                                <th class="px-2 py-2 text-left font-bold text-sky-900">Funzione</th>
                                                <th class="px-2 py-2 text-left font-bold text-sky-900">Visibilit√†</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-sky-100">
                                            <tr>
                                                <td class="px-2 py-2"><span class="bg-orange-100 border border-orange-300 px-2 py-0.5 rounded text-xs">üåê All Locations ‚ñæ</span></td>
                                                <td class="px-2 py-2 text-sky-700">Filtro globale per Location. Filtra TUTTI i dati visualizzati in ogni scheda.</td>
                                                <td class="px-2 py-2 text-sky-600">Sempre</td>
                                            </tr>
                                            <tr class="bg-sky-50">
                                                <td class="px-2 py-2"><span class="bg-blue-500 text-white px-2 py-0.5 rounded text-xs">üì± N Devices</span></td>
                                                <td class="px-2 py-2 text-sky-700">Mostra il totale dispositivi. Click per andare alla scheda Devices.</td>
                                                <td class="px-2 py-2 text-sky-600">Sempre</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2"><span class="bg-green-500 text-white px-2 py-0.5 rounded text-xs">‚ö° N Connections</span></td>
                                                <td class="px-2 py-2 text-sky-700">Mostra il totale connessioni. Click per andare alla scheda Connections.</td>
                                                <td class="px-2 py-2 text-sky-600">Sempre</td>
                                            </tr>
                                            <tr class="bg-sky-50">
                                                <td class="px-2 py-2"><span class="bg-green-600 text-white px-2 py-0.5 rounded text-xs">üíæ Save Now</span></td>
                                                <td class="px-2 py-2 text-sky-700">Salva tutte le modifiche sul server. <strong class="text-red-600">ESSENZIALE!</strong></td>
                                                <td class="px-2 py-2 text-sky-600">Solo Edit Mode</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2"><span class="bg-indigo-500 text-white px-2 py-0.5 rounded text-xs">üìä Export to Excel</span></td>
                                                <td class="px-2 py-2 text-sky-700">Scarica file Excel con tutti i dati (dispositivi, connessioni, stanze).</td>
                                                <td class="px-2 py-2 text-sky-600">Sempre</td>
                                            </tr>
                                            <tr class="bg-sky-50">
                                                <td class="px-2 py-2"><span class="bg-slate-500 text-white px-2 py-0.5 rounded text-xs">üíæ Export JSON</span></td>
                                                <td class="px-2 py-2 text-sky-700">Scarica backup JSON completo. Usalo per backup e ripristini!</td>
                                                <td class="px-2 py-2 text-sky-600">Sempre</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2"><span class="bg-slate-500 text-white px-2 py-0.5 rounded text-xs">üì• Import JSON</span></td>
                                                <td class="px-2 py-2 text-sky-700">Carica un file JSON di backup. <strong class="text-red-600">SOVRASCRIVE tutto!</strong></td>
                                                <td class="px-2 py-2 text-sky-600">Solo Edit Mode</td>
                                            </tr>
                                            <tr class="bg-sky-50">
                                                <td class="px-2 py-2"><span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">Clear All</span></td>
                                                <td class="px-2 py-2 text-sky-700">Elimina TUTTI i dati. Crea backup automatico prima della cancellazione.</td>
                                                <td class="px-2 py-2 text-sky-600">Solo Edit Mode</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-sky-200">
                                <h3 class="font-bold text-sky-900 mb-3">üìë Le Schede (Tabs)</h3>
                                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-3 text-xs">
                                    <div class="bg-purple-50 p-3 rounded-lg border border-purple-200">
                                        <span class="font-bold text-purple-900">üì± Devices</span>
                                        <p class="text-purple-700 mt-1">Elenco di tutti i dispositivi di rete. Qui aggiungi, modifichi ed elimini dispositivi.</p>
                                    </div>
                                    <div class="bg-orange-50 p-3 rounded-lg border border-orange-200">
                                        <span class="font-bold text-orange-900">‚ö° Active Connections</span>
                                        <p class="text-orange-700 mt-1">Elenco di tutti i cavi/collegamenti. Qui documenti le connessioni fisiche.</p>
                                    </div>
                                    <div class="bg-cyan-50 p-3 rounded-lg border border-cyan-200">
                                        <span class="font-bold text-cyan-900">üó∫Ô∏è Topology</span>
                                        <p class="text-cyan-700 mt-1">Mappa grafica interattiva della rete con icone stile Cisco.</p>
                                    </div>
                                    <div class="bg-pink-50 p-3 rounded-lg border border-pink-200">
                                        <span class="font-bold text-pink-900">üìä Matrix</span>
                                        <p class="text-pink-700 mt-1">Matrice delle connessioni: griglia visuale che mostra chi √® collegato a chi.</p>
                                    </div>
                                    <div class="bg-emerald-50 p-3 rounded-lg border border-emerald-200">
                                        <span class="font-bold text-emerald-900">üè¢ Floor Plan</span>
                                        <p class="text-emerald-700 mt-1">Planimetria delle stanze con dispositivi associati.</p>
                                    </div>
                                    <div class="bg-blue-50 p-3 rounded-lg border border-blue-200">
                                        <span class="font-bold text-blue-900">‚ùì Help</span>
                                        <p class="text-blue-700 mt-1">Questa guida che stai leggendo!</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-sky-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 2. AUTENTICAZIONE ========== -->
                    <div class="bg-green-50 border-l-4 border-green-500 rounded-r-xl p-5 mb-6" id="help-auth">
                        <h2 class="text-xl font-bold text-green-800 mb-3 flex items-center gap-2">
                            <span class="bg-green-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">2</span>
                            üîê Autenticazione e Permessi
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                <h3 class="font-bold text-green-900 mb-2">üîê Due Modalit√† di Accesso</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-slate-50 p-3 rounded-lg border-l-4 border-slate-400">
                                        <span class="font-bold text-slate-800">üëÅÔ∏è View Mode (Ospite)</span>
                                        <p class="text-slate-600 text-xs mt-1">Accesso senza login. Puoi:</p>
                                        <ul class="text-slate-500 text-xs mt-1 ml-3 list-disc">
                                            <li>Visualizzare tutti i dati</li>
                                            <li>Navigare tra le schede</li>
                                            <li>Esportare Excel/JSON/PNG</li>
                                            <li>Stampare</li>
                                        </ul>
                                    </div>
                                    <div class="bg-green-100 p-3 rounded-lg border-l-4 border-green-500">
                                        <span class="font-bold text-green-800">‚úèÔ∏è Edit Mode (Autenticato)</span>
                                        <p class="text-green-700 text-xs mt-1">Dopo il login. Puoi anche:</p>
                                        <ul class="text-green-600 text-xs mt-1 ml-3 list-disc">
                                            <li>Aggiungere/Modificare/Eliminare dispositivi</li>
                                            <li>Creare/Modificare/Eliminare connessioni</li>
                                            <li>Gestire stanze nel Floor Plan</li>
                                            <li>Importare dati JSON</li>
                                            <li>Svuotare tutti i dati (Clear All)</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-green-200">
                                <h3 class="font-bold text-green-900 mb-2">üîì Come Effettuare il Login</h3>
                                <ol class="text-green-800 text-sm space-y-2 list-decimal ml-4">
                                    <li>Clicca il pulsante <span class="bg-blue-500 text-white px-2 py-0.5 rounded text-xs">üîì Edit Mode</span> in alto a destra</li>
                                    <li>Inserisci <strong>Username</strong> e <strong>Password</strong> forniti dall'amministratore</li>
                                    <li>Clicca <strong>Login</strong></li>
                                    <li>Vedrai il messaggio di benvenuto e i controlli di modifica diventeranno visibili</li>
                                </ol>
                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-2 mt-3">
                                    <p class="text-amber-800 text-xs">‚ö†Ô∏è <strong>Importante:</strong> Dopo aver effettuato modifiche, clicca sempre <span class="bg-green-600 text-white px-2 py-0.5 rounded text-xs">üíæ Save Now</span> per salvare!</p>
                                </div>
                            </div>

                            <!-- Sezione Multi-Utente -->
                            <div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-4 border border-blue-300">
                                <h3 class="font-bold text-blue-900 mb-2">üë• Accesso Multi-Utente (Lock di Modifica)</h3>
                                <p class="text-blue-800 text-sm mb-3">Il sistema permette a <strong>un solo utente</strong> di modificare i dati alla volta per evitare conflitti.</p>
                                
                                <div class="bg-white rounded-lg p-3 border border-blue-200 mb-3">
                                    <p class="font-semibold text-blue-900 text-sm mb-2">‚öôÔ∏è Come funziona:</p>
                                    <ul class="text-blue-700 text-xs space-y-1 ml-3 list-disc">
                                        <li>Quando effettui il <strong>login</strong>, il sistema acquisisce un "lock di modifica"</li>
                                        <li>Se un altro utente sta gi√† modificando, vedrai un avviso con il nome dell'editor</li>
                                        <li>Il lock scade automaticamente dopo <strong>5 minuti di inattivit√†</strong></li>
                                        <li>Quando fai <strong>logout</strong>, il lock viene rilasciato per altri utenti</li>
                                    </ul>
                                </div>

                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-green-50 p-3 rounded-lg border border-green-200">
                                        <span class="font-bold text-green-800">‚úÖ Puoi modificare se:</span>
                                        <ul class="text-green-700 mt-1 ml-3 list-disc">
                                            <li>Nessuno sta modificando</li>
                                            <li>Il lock precedente √® scaduto</li>
                                            <li>Sei tu stesso che hai il lock</li>
                                        </ul>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <span class="font-bold text-red-800">‚ùå Non puoi modificare se:</span>
                                        <ul class="text-red-700 mt-1 ml-3 list-disc">
                                            <li>Un altro utente sta modificando</li>
                                            <li>Devi attendere che finisca o che il lock scada</li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-2 mt-3">
                                    <p class="text-amber-800 text-xs">üí° <strong>Best Practice:</strong> Fai sempre <strong>logout</strong> quando finisci di modificare, cos√¨ altri possono accedere subito!</p>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-green-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 3. SCHEDA DEVICES ========== -->
                    <div class="bg-purple-50 border-l-4 border-purple-500 rounded-r-xl p-5 mb-6" id="help-devices">
                        <h2 class="text-xl font-bold text-purple-800 mb-3 flex items-center gap-2">
                            <span class="bg-purple-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">3</span>
                            üì± Scheda Devices (Dispositivi)
                        </h2>
                        
                        <div class="space-y-4">
                            <!-- Descrizione della scheda -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-2">üìã Cos'√® la Scheda Devices?</h3>
                                <p class="text-purple-800 text-sm mb-3">La scheda <strong>Devices</strong> √® il cuore del sistema. Qui gestisci <u>tutti</u> i dispositivi della tua rete: router, switch, server, patch panel, access point, PC, stampanti, telecamere IP, UPS, e qualsiasi altro apparecchio collegato alla rete.</p>
                                
                                <div class="bg-purple-50 border border-purple-200 rounded-lg p-3">
                                    <p class="font-semibold text-purple-900 text-sm mb-2">üìå In questa scheda puoi:</p>
                                    <ul class="text-purple-700 text-xs ml-4 list-disc space-y-1">
                                        <li><strong>Visualizzare</strong> l'elenco completo di tutti i dispositivi registrati</li>
                                        <li><strong>Aggiungere</strong> nuovi dispositivi compilando il form (richiede login)</li>
                                        <li><strong>Modificare</strong> dispositivi esistenti cliccando il pulsante "Edit"</li>
                                        <li><strong>Eliminare</strong> dispositivi cliccando il pulsante "Del" (attenzione: elimina anche le connessioni!)</li>
                                        <li><strong>Filtrare</strong> per Location, Group, Type, Status o cercare per nome/IP</li>
                                        <li><strong>Cambiare vista</strong> tra Cards (schede) e Table (tabella)</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Form Add Device - Tutti i campi DETTAGLIATI -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-3">üìù Formulario "Add Device" - Spiegazione Dettagliata di Ogni Campo</h3>
                                <p class="text-purple-700 text-xs mb-3">Il form per aggiungere un dispositivo appare solo in <strong>Edit Mode</strong> (dopo il login). Ecco cosa significa ogni campo:</p>
                                
                                <!-- Campo Location -->
                                <div class="bg-purple-50 rounded-lg p-3 mb-3 border-l-4 border-purple-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-purple-600 text-white px-2 py-1 rounded text-xs font-bold">üìç Location</span>
                                        <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">OBBLIGATORIO</span>
                                    </div>
                                    <p class="text-purple-800 text-sm mb-2"><strong>Cosa significa:</strong> La sede, edificio o reparto dove si trova fisicamente il dispositivo.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-purple-900">‚úÖ Esempi corretti:</p>
                                            <ul class="text-purple-700 ml-3 list-disc">
                                                <li>"Sede Centrale"</li>
                                                <li>"Filiale Torino"</li>
                                                <li>"Magazzino Zona Nord"</li>
                                                <li>"Edificio A - Piano 2"</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-purple-900">üìå Note:</p>
                                            <ul class="text-purple-700 ml-3 list-disc">
                                                <li>Seleziona da elenco o crea nuova</li>
                                                <li>Usa il pulsante ‚öôÔ∏è per gestire le location</li>
                                                <li>Le location delle stanze (Floor Plan) appaiono qui</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo Group -->
                                <div class="bg-blue-50 rounded-lg p-3 mb-3 border-l-4 border-blue-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-blue-600 text-white px-2 py-1 rounded text-xs font-bold">üóÇÔ∏è Group</span>
                                        <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">OBBLIGATORIO</span>
                                    </div>
                                    <p class="text-blue-800 text-sm mb-2"><strong>Cosa significa:</strong> Il raggruppamento all'interno della location: rack, armadio, stanza specifica, zona.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-blue-900">‚úÖ Esempi corretti:</p>
                                            <ul class="text-blue-700 ml-3 list-disc">
                                                <li>"Rack-01" (armadio rack numero 1)</li>
                                                <li>"Rack-02" (armadio rack numero 2)</li>
                                                <li>"Ufficio Direzione" (stanza)</li>
                                                <li>"Sala Server" (stanza)</li>
                                                <li>"Standalone" (dispositivi sparsi)</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-blue-900">üìå Note:</p>
                                            <ul class="text-blue-700 ml-3 list-disc">
                                                <li>Puoi digitare liberamente o selezionare</li>
                                                <li>L'elenco mostra i gruppi gi√† usati</li>
                                                <li>Usa nomi coerenti per raggruppare</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <!-- IMPORTANTE: Gruppi condivisi tra locations -->
                                    <div class="bg-blue-100 rounded-lg p-3 mt-3 border border-blue-300">
                                        <p class="font-bold text-blue-900 text-sm mb-2">üí° Gruppi Condivisi tra Locations</p>
                                        <p class="text-blue-800 text-xs mb-2">Puoi usare lo <strong>stesso nome di gruppo</strong> in pi√π locations diverse! Il sistema differenzia automaticamente i dispositivi in base alla <strong>Location</strong>.</p>
                                        
                                        <div class="bg-white rounded p-2 mb-2">
                                            <p class="font-semibold text-blue-900 text-xs mb-1">üìû Esempio: Telefoni IP in ogni reparto</p>
                                            <div class="grid grid-cols-3 gap-1 text-xs">
                                                <div class="bg-blue-50 p-1 rounded text-center">
                                                    <div class="font-bold">Ufficio 12</div>
                                                    <div class="text-blue-600">Group: IP Phone</div>
                                                </div>
                                                <div class="bg-blue-50 p-1 rounded text-center">
                                                    <div class="font-bold">Magazzino</div>
                                                    <div class="text-blue-600">Group: IP Phone</div>
                                                </div>
                                                <div class="bg-blue-50 p-1 rounded text-center">
                                                    <div class="font-bold">Reception</div>
                                                    <div class="text-blue-600">Group: IP Phone</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <div class="bg-white rounded p-2 mb-2">
                                            <p class="font-semibold text-blue-900 text-xs mb-1">üåê Esempio: Router di area in ogni reparto</p>
                                            <div class="grid grid-cols-3 gap-1 text-xs">
                                                <div class="bg-green-50 p-1 rounded text-center">
                                                    <div class="font-bold">Produzione</div>
                                                    <div class="text-green-600">Group: Area Router</div>
                                                </div>
                                                <div class="bg-green-50 p-1 rounded text-center">
                                                    <div class="font-bold">Amministrazione</div>
                                                    <div class="text-green-600">Group: Area Router</div>
                                                </div>
                                                <div class="bg-green-50 p-1 rounded text-center">
                                                    <div class="font-bold">QA/ICT</div>
                                                    <div class="text-green-600">Group: Area Router</div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <p class="text-blue-700 text-xs"><strong>‚ö†Ô∏è Filtraggio:</strong> Quando filtri solo per Group (es. "IP Phone") senza selezionare una Location, vedrai tutti i telefoni di tutte le locations. Il sistema mostrer√† un avviso per ricordarti di filtrare per Location.</p>
                                        
                                        <div class="bg-amber-50 border border-amber-200 rounded p-2 mt-2">
                                            <p class="font-semibold text-amber-800 text-xs">üìã Gruppi suggeriti per dispositivi sparsi:</p>
                                            <ul class="text-amber-700 text-xs ml-3 list-disc">
                                                <li><strong>IP Phone</strong> - Telefoni VoIP</li>
                                                <li><strong>Area Router</strong> - Router di dipartimento</li>
                                                <li><strong>Access Points</strong> - Punti WiFi</li>
                                                <li><strong>Printers</strong> - Stampanti di rete</li>
                                                <li><strong>Endpoints</strong> - Altri dispositivi</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo Order -->
                                <div class="bg-amber-50 rounded-lg p-3 mb-3 border-l-4 border-amber-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-amber-600 text-white px-2 py-1 rounded text-xs font-bold">üî¢ Order</span>
                                        <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">OBBLIGATORIO</span>
                                    </div>
                                    <p class="text-amber-800 text-sm mb-2"><strong>Cosa significa:</strong> La posizione fisica del dispositivo all'interno del rack (unit√† U). Serve per ordinare i dispositivi nella visualizzazione.</p>
                                    <div class="grid md:grid-cols-3 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-amber-900">‚úÖ Valori:</p>
                                            <ul class="text-amber-700 ml-3 list-disc">
                                                <li><code class="bg-amber-200 px-1 rounded">01</code> - <code class="bg-amber-200 px-1 rounded">99</code> = Posizione nel rack</li>
                                                <li><code class="bg-amber-200 px-1 rounded">00</code> = Dispositivo "sparso" (non in rack)</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-amber-900">üìå Convezione:</p>
                                            <ul class="text-amber-700 ml-3 list-disc">
                                                <li>01 = In alto nel rack</li>
                                                <li>42 = In basso (rack standard)</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-amber-900">‚ñ≤‚ñº Pulsanti:</p>
                                            <p class="text-amber-700">Usa le frecce per incrementare/decrementare velocemente</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Checkbox Rear -->
                                <div class="bg-orange-50 rounded-lg p-3 mb-3 border-l-4 border-orange-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-orange-600 text-white px-2 py-1 rounded text-xs font-bold">‚Ü©Ô∏è Rear (R)</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-orange-800 text-sm mb-2"><strong>Cosa significa:</strong> Checkbox che indica se il dispositivo √® montato sul <u>retro</u> del rack invece che sul fronte.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-orange-900">‚òëÔ∏è Quando selezionare:</p>
                                            <ul class="text-orange-700 ml-3 list-disc">
                                                <li>Patch panel montato sul retro</li>
                                                <li>PDU (ciabatta elettrica) posteriore</li>
                                                <li>Organizer cavi posteriore</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-orange-900">üìå Effetto:</p>
                                            <ul class="text-orange-700 ml-3 list-disc">
                                                <li>Il numero Order diventa negativo (es. -05)</li>
                                                <li>Visivamente distinto nella lista</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo Device Name -->
                                <div class="bg-green-50 rounded-lg p-3 mb-3 border-l-4 border-green-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-green-600 text-white px-2 py-1 rounded text-xs font-bold">üìü Device Name</span>
                                        <span class="bg-red-500 text-white px-2 py-0.5 rounded text-xs">OBBLIGATORIO</span>
                                    </div>
                                    <p class="text-green-800 text-sm mb-2"><strong>Cosa significa:</strong> Il nome identificativo del dispositivo. Deve essere <u>univoco</u> in tutto il sistema.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-green-900">‚úÖ Esempi corretti:</p>
                                            <ul class="text-green-700 ml-3 list-disc">
                                                <li>"SW-Core-01" (Switch Core 1)</li>
                                                <li>"RT-Gateway" (Router Gateway)</li>
                                                <li>"SRV-DC01" (Server Domain Controller)</li>
                                                <li>"AP-Sala-Riunioni" (Access Point)</li>
                                                <li>"PP-01-A" (Patch Panel 1 lato A)</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-green-900">üìå Suggerimenti:</p>
                                            <ul class="text-green-700 ml-3 list-disc">
                                                <li>Usa prefissi: SW=Switch, RT=Router, SRV=Server</li>
                                                <li>Aggiungi numeri progressivi</li>
                                                <li>Evita spazi (usa trattini -)</li>
                                                <li>Max 100 caratteri</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo Brand/Model -->
                                <div class="bg-slate-50 rounded-lg p-3 mb-3 border-l-4 border-slate-500">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-slate-600 text-white px-2 py-1 rounded text-xs font-bold">üîß Brand/Model</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-slate-800 text-sm mb-2"><strong>Cosa significa:</strong> Marca e modello dell'hardware. Utile per inventario e supporto tecnico.</p>
                                    <div class="bg-white p-2 rounded text-xs">
                                        <p class="font-semibold text-slate-900">‚úÖ Esempi:</p>
                                        <span class="text-slate-600">"Imola6 LX5272", "HPE Aruba 2930F-48G", "Dell PowerEdge R740", "Ubiquiti UniFi AP-AC-Pro"</span>
                                    </div>
                                </div>

                                <!-- Campo Type -->
                                <div class="bg-cyan-50 rounded-lg p-3 mb-3 border-l-4 border-cyan-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-cyan-600 text-white px-2 py-1 rounded text-xs font-bold">üè∑Ô∏è Type</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-cyan-800 text-sm mb-2"><strong>Cosa significa:</strong> Categoria del dispositivo. Determina l'icona mostrata nella Topology e aiuta a filtrare.</p>
                                    <p class="text-cyan-700 text-xs mb-1">Vedi sezione "Tipi di Dispositivo" pi√π sotto per l'elenco completo.</p>
                                </div>

                                <!-- Campo Status -->
                                <div class="bg-emerald-50 rounded-lg p-3 mb-3 border-l-4 border-emerald-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-emerald-600 text-white px-2 py-1 rounded text-xs font-bold">‚ö° Status</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-emerald-800 text-sm mb-2"><strong>Cosa significa:</strong> Stato operativo del dispositivo.</p>
                                    <div class="flex gap-4 text-xs">
                                        <div class="bg-green-100 px-3 py-1 rounded border border-green-300">
                                            <span class="font-bold text-green-800">üü¢ Active</span>
                                            <p class="text-green-700">Dispositivo attivo e funzionante</p>
                                        </div>
                                        <div class="bg-red-100 px-3 py-1 rounded border border-red-300">
                                            <span class="font-bold text-red-800">üî¥ Disabled</span>
                                            <p class="text-red-700">Dispositivo disattivato/spento/in manutenzione</p>
                                        </div>
                                    </div>
                                    <p class="text-emerald-600 text-xs mt-2">üí° I dispositivi Disabled appaiono con asterisco (*) prima del nome e sfondo grigio.</p>
                                </div>

                                <!-- Campo Service -->
                                <div class="bg-pink-50 rounded-lg p-3 mb-3 border-l-4 border-pink-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-pink-600 text-white px-2 py-1 rounded text-xs font-bold">‚öôÔ∏è Service</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-pink-800 text-sm mb-2"><strong>Cosa significa:</strong> Servizi o ruoli forniti dal dispositivo. Testo libero.</p>
                                    <div class="bg-white p-2 rounded text-xs">
                                        <p class="font-semibold text-pink-900">‚úÖ Esempi: </p>
                                        <span class="text-pink-600">"DHCP, DNS", "Gateway Internet", "File Server", "Domain Controller", "Backup", "VoIP PBX", "Videosorveglianza"</span>
                                    </div>
                                </div>

                                <!-- Campo Network Zone (NEW v3.5.030) -->
                                <div class="bg-rose-50 rounded-lg p-3 mb-3 border-l-4 border-rose-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-rose-600 text-white px-2 py-1 rounded text-xs font-bold">üî≤ Network Zone</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                        <span class="bg-green-500 text-white px-2 py-0.5 rounded text-xs">NEW!</span>
                                    </div>
                                    <p class="text-rose-800 text-sm mb-2"><strong>Cosa significa:</strong> Zona di rete a cui appartiene il dispositivo. Usato per raggruppare visivamente i dispositivi nella Topologia.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-rose-900 mb-1">üõ°Ô∏è Zone predefinite:</p>
                                            <ul class="text-rose-700 ml-3 list-disc space-y-1">
                                                <li><strong>DMZ</strong> - Zona demilitarizzata (rosso)</li>
                                                <li><strong>Backbone</strong> - Rete principale (arancione)</li>
                                                <li><strong>LAN</strong> - Rete locale (blu)</li>
                                                <li><strong>WAN</strong> - Rete esterna (verde)</li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-rose-900 mb-1">üåê Zone IP:</p>
                                            <p class="text-rose-700 mb-1">Campo opzionale per il range CIDR della zona:</p>
                                            <ul class="text-rose-700 ml-3 list-disc">
                                                <li><code class="bg-rose-200 px-1 rounded">172.24.254.0/24</code></li>
                                                <li><code class="bg-rose-200 px-1 rounded">10.10.0.0/16</code></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <p class="text-rose-600 text-xs mt-2">üí° Nella Topologia, dispositivi della stessa zona vengono raggruppati in un'area colorata con etichetta.</p>
                                </div>

                                <!-- Campo IP Addresses -->
                                <div class="bg-indigo-50 rounded-lg p-3 mb-3 border-l-4 border-indigo-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-indigo-600 text-white px-2 py-1 rounded text-xs font-bold">üåê IP Addresses</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-indigo-800 text-sm mb-2"><strong>Cosa significa:</strong> Indirizzi IP assegnati al dispositivo. Puoi inserire fino a 4 IP.</p>
                                    <div class="grid md:grid-cols-2 gap-2 text-xs">
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-indigo-900">‚úÖ Formato corretto:</p>
                                            <ul class="text-indigo-700 ml-3 list-disc">
                                                <li><code class="bg-indigo-200 px-1 rounded">192.168.1.1/24</code> (con subnet mask)</li>
                                                <li><code class="bg-indigo-200 px-1 rounded">10.0.0.1</code> (senza mask)</li>
                                                <li><code class="bg-indigo-200 px-1 rounded">172.16.0.1/16</code></li>
                                            </ul>
                                        </div>
                                        <div class="bg-white p-2 rounded">
                                            <p class="font-semibold text-indigo-900">üìå Pulsante +:</p>
                                            <p class="text-indigo-700">Clicca "+" per aggiungere altri campi IP (max 4 per dispositivo)</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- Campo Port Config -->
                                <div class="bg-red-50 rounded-lg p-3 mb-3 border-l-4 border-red-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-red-600 text-white px-2 py-1 rounded text-xs font-bold">üîå Port Config</span>
                                        <span class="bg-orange-500 text-white px-2 py-0.5 rounded text-xs">IMPORTANTE!</span>
                                    </div>
                                    <p class="text-red-800 text-sm mb-2"><strong>Cosa significa:</strong> Configurazione delle porte fisiche del dispositivo. <u>Fondamentale per poter creare connessioni!</u></p>
                                    <div class="bg-white p-2 rounded text-xs mb-2">
                                        <p class="font-semibold text-red-900 mb-1">Come funziona:</p>
                                        <ol class="text-red-700 ml-4 list-decimal space-y-1">
                                            <li>Seleziona il <strong>tipo di porta</strong> dal menu (es. "Eth", "GbE", "SFP")</li>
                                            <li>Inserisci la <strong>quantit√†</strong> (es. 24, 48)</li>
                                            <li>Clicca <span class="bg-green-500 text-white px-1 rounded">+ Add</span></li>
                                            <li>Ripeti per ogni tipo di porta presente</li>
                                        </ol>
                                    </div>
                                    <div class="bg-amber-100 border border-amber-300 rounded p-2 text-xs">
                                        <p class="font-bold text-amber-900">‚ö†Ô∏è Attenzione:</p>
                                        <p class="text-amber-800">Se non configuri le porte, non potrai creare connessioni da/verso questo dispositivo! Le porte generano automaticamente gli ID (es. Eth-1, Eth-2, ... Eth-24)</p>
                                    </div>
                                </div>

                                <!-- Campo Links -->
                                <div class="bg-violet-50 rounded-lg p-3 mb-3 border-l-4 border-violet-600">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-violet-600 text-white px-2 py-1 rounded text-xs font-bold">üîó Links</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-violet-800 text-sm mb-2"><strong>Cosa significa:</strong> Link di accesso rapido al dispositivo. Supporta vari protocolli per connessione diretta.</p>
                                    
                                    <div class="bg-white p-3 rounded mb-2">
                                        <p class="font-semibold text-violet-900 text-sm mb-2">üîå Protocolli Supportati:</p>
                                        <div class="grid grid-cols-2 gap-2 text-xs">
                                            <div class="bg-blue-50 p-2 rounded border-l-2 border-blue-500">
                                                <span class="font-bold text-blue-800">SSH</span>
                                                <p class="text-blue-700">Clicca ‚Üí apre client SSH + copia indirizzo</p>
                                                <code class="text-blue-600 text-[10px]">ssh://192.168.1.1</code>
                                            </div>
                                            <div class="bg-orange-50 p-2 rounded border-l-2 border-orange-500">
                                                <span class="font-bold text-orange-800">RDP</span>
                                                <p class="text-orange-700">Clicca ‚Üí scarica file .rdp</p>
                                                <code class="text-orange-600 text-[10px]">rdp://192.168.1.1</code>
                                            </div>
                                            <div class="bg-purple-50 p-2 rounded border-l-2 border-purple-500">
                                                <span class="font-bold text-purple-800">VNC</span>
                                                <p class="text-purple-700">Clicca ‚Üí apre viewer + copia indirizzo</p>
                                                <code class="text-purple-600 text-[10px]">vnc://192.168.1.1</code>
                                            </div>
                                            <div class="bg-teal-50 p-2 rounded border-l-2 border-teal-500">
                                                <span class="font-bold text-teal-800">Telnet</span>
                                                <p class="text-teal-700">Clicca ‚Üí apre client + copia indirizzo</p>
                                                <code class="text-teal-600 text-[10px]">telnet://192.168.1.1</code>
                                            </div>
                                            <div class="bg-green-50 p-2 rounded border-l-2 border-green-500">
                                                <span class="font-bold text-green-800">HTTP/HTTPS</span>
                                                <p class="text-green-700">Clicca ‚Üí apre in nuova scheda</p>
                                                <code class="text-green-600 text-[10px]">https://192.168.1.1</code>
                                            </div>
                                            <div class="bg-amber-50 p-2 rounded border-l-2 border-amber-500">
                                                <span class="font-bold text-amber-800">SMB/NFS</span>
                                                <p class="text-amber-700">Clicca ‚Üí copia percorso</p>
                                                <code class="text-amber-600 text-[10px]">smb://server/share</code>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="bg-amber-100 border border-amber-300 rounded p-2 text-xs">
                                        <p class="font-bold text-amber-900">üí° Suggerimento:</p>
                                        <p class="text-amber-800">Se il protocollo non si apre automaticamente, l'indirizzo √® gi√† copiato negli appunti - basta incollare nel tuo client!</p>
                                    </div>
                                </div>

                                <!-- Campo Notes -->
                                <div class="bg-gray-50 rounded-lg p-3 border-l-4 border-gray-500">
                                    <div class="flex items-center gap-2 mb-2">
                                        <span class="bg-gray-600 text-white px-2 py-1 rounded text-xs font-bold">üìù Notes</span>
                                        <span class="bg-slate-400 text-white px-2 py-0.5 rounded text-xs">OPZIONALE</span>
                                    </div>
                                    <p class="text-gray-800 text-sm mb-2"><strong>Cosa significa:</strong> Note libere. Qualsiasi informazione aggiuntiva utile.</p>
                                    <div class="bg-white p-2 rounded text-xs">
                                        <p class="font-semibold text-gray-900">‚úÖ Esempi: </p>
                                        <span class="text-gray-600">"Installato 15/01/2026", "Contratto manutenzione scade 12/2027", "Password console: admin/admin", "SN: ABC123456"</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Tipi di dispositivo -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-3">üè∑Ô∏è Tipi di Dispositivo Disponibili</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                    <div class="bg-slate-50 p-2 rounded">üì° Router</div>
                                    <div class="bg-slate-50 p-2 rounded">üîÄ Switch</div>
                                    <div class="bg-slate-50 p-2 rounded">üìå Patch Panel</div>
                                    <div class="bg-slate-50 p-2 rounded">üîå Wall Jack</div>
                                    <div class="bg-slate-50 p-2 rounded">üõ°Ô∏è Firewall</div>
                                    <div class="bg-slate-50 p-2 rounded">üñ•Ô∏è Server</div>
                                    <div class="bg-slate-50 p-2 rounded">üì∂ WiFi AP</div>
                                    <div class="bg-slate-50 p-2 rounded">üåê ISP/Provider</div>
                                    <div class="bg-slate-50 p-2 rounded">üì∂ Router WiFi</div>
                                    <div class="bg-slate-50 p-2 rounded">üì† Modem</div>
                                    <div class="bg-slate-50 p-2 rounded">üîò Hub</div>
                                    <div class="bg-slate-50 p-2 rounded">üíª PC/Desktop</div>
                                    <div class="bg-slate-50 p-2 rounded">üì± Tablet</div>
                                    <div class="bg-slate-50 p-2 rounded">üìû IP Phone</div>
                                    <div class="bg-slate-50 p-2 rounded">üñ®Ô∏è Printer</div>
                                    <div class="bg-slate-50 p-2 rounded">üóÑÔ∏è NAS/Storage</div>
                                    <div class="bg-slate-50 p-2 rounded">üìπ IP Camera</div>
                                    <div class="bg-slate-50 p-2 rounded">üîã UPS</div>
                                    <div class="bg-slate-50 p-2 rounded">üì¶ Others</div>
                                </div>
                            </div>

                            <!-- Tipi di porta -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-3">üîå Tipi di Porta Disponibili</h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-2 text-xs">
                                    <div class="bg-blue-50 p-2 rounded"><strong>Eth</strong> - Ethernet 10/100</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>GbE</strong> - Gigabit Ethernet</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>10GbE</strong> - 10 Gigabit</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>SFP</strong> - Small Form-factor</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>SFP+</strong> - Enhanced SFP</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>QSFP</strong> - Quad SFP</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>RJ45</strong> - Standard Ethernet</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>Console</strong> - Management</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>USB</strong> - USB port</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>Serial</strong> - RS-232</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>Fiber SC</strong> - SC connector</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>Fiber LC</strong> - LC connector</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>PoE</strong> - Power over Ethernet</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>PoE+</strong> - Enhanced PoE</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>WAN</strong> - WAN port</div>
                                    <div class="bg-blue-50 p-2 rounded"><strong>LAN</strong> - LAN port</div>
                                </div>
                            </div>

                            <!-- Visualizzazione lista -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-2">üëÅÔ∏è Modalit√† di Visualizzazione</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">üÉè Cards View</span>
                                        <p class="text-slate-600 text-xs mt-1">Visualizzazione a schede, raggruppate per Location e Group. Ideale per panoramiche.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">üìã Table View</span>
                                        <p class="text-slate-600 text-xs mt-1">Visualizzazione tabellare con tutti i dettagli. Ideale per ricerche e confronti.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Filtri -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-2">üîç Filtri Disponibili</h3>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">üìç Location</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">üóÇÔ∏è Group</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">üè∑Ô∏è Type</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">‚ö° Status</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">üîç Search (Nome/IP)</span>
                                </div>
                            </div>

                            <!-- Azioni sui dispositivi -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-2">‚ö° Azioni sui Dispositivi</h3>
                                <div class="flex flex-wrap gap-2 text-xs mb-3">
                                    <span class="bg-green-500 text-white px-2 py-1 rounded">+ Add</span>
                                    <span class="bg-purple-500 text-white px-2 py-1 rounded">üìã Copy</span>
                                    <span class="bg-blue-500 text-white px-2 py-1 rounded">‚úèÔ∏è Edit</span>
                                    <span class="bg-red-500 text-white px-2 py-1 rounded">üóëÔ∏è Del</span>
                                </div>
                                <div class="bg-purple-50 p-2 rounded text-xs mb-2">
                                    <p class="font-bold text-purple-900">üìã Copy (Duplica):</p>
                                    <p class="text-purple-800">Crea una copia del dispositivo con tutte le impostazioni (nome, tipo, porte, IP, links). La copia si apre automaticamente in modalit√† modifica per personalizzare.</p>
                                </div>
                                <p class="text-red-600 text-xs">‚ö†Ô∏è Eliminando un dispositivo, TUTTE le sue connessioni verranno eliminate!</p>
                            </div>

                            <!-- Indicatore Online Users -->
                            <div class="bg-white rounded-lg p-4 border border-purple-200">
                                <h3 class="font-bold text-purple-900 mb-2">üë• Utenti Online</h3>
                                <p class="text-purple-800 text-sm mb-2">L'indicatore in alto a destra mostra quanti utenti stanno visualizzando il sistema:</p>
                                <div class="flex gap-3 text-xs">
                                    <div class="bg-emerald-100 text-emerald-700 px-3 py-2 rounded-lg">
                                        <span class="font-bold">Verde</span> = Solo visualizzatori
                                    </div>
                                    <div class="bg-amber-100 text-amber-700 px-3 py-2 rounded-lg">
                                        <span class="font-bold">Ambra</span> = Qualcuno sta modificando
                                    </div>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-purple-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 4. SCHEDA CONNECTIONS ========== -->
                    <div class="bg-orange-50 border-l-4 border-orange-500 rounded-r-xl p-5 mb-6" id="help-connections">
                        <h2 class="text-xl font-bold text-orange-800 mb-3 flex items-center gap-2">
                            <span class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">4</span>
                            ‚ö° Scheda Active Connections
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-2">üìã Descrizione</h3>
                                <p class="text-orange-800 text-sm">Qui crei e gestisci le <strong>connessioni fisiche</strong> (cavi) tra i dispositivi. Ogni connessione rappresenta un cavo che collega una porta di un dispositivo a una porta di un altro.</p>
                            </div>

                            <!-- Form Connection - Tutti i campi -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üìù Formulario "Add Connection" - Tutti i Campi</h3>
                                
                                <div class="overflow-x-auto">
                                    <table class="w-full text-xs">
                                        <thead class="bg-orange-100">
                                            <tr>
                                                <th class="px-2 py-1 text-left font-bold text-orange-900">Campo</th>
                                                <th class="px-2 py-1 text-left font-bold text-orange-900">Obbl.</th>
                                                <th class="px-2 py-1 text-left font-bold text-orange-900">Descrizione</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-orange-100">
                                            <tr class="bg-orange-50">
                                                <td class="px-2 py-2 font-semibold text-orange-800" colspan="3">üì§ SORGENTE (Da dove parte il cavo)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-orange-700">üìç From Location</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-orange-700">Filtra dispositivi per sede (opzionale)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-orange-700">üóÇÔ∏è From Group</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-orange-700">Filtra dispositivi per gruppo (opzionale)</td>
                                            </tr>
                                            <tr class="bg-orange-50">
                                                <td class="px-2 py-2 font-semibold text-orange-800">üìü From Device</td>
                                                <td class="px-2 py-2 text-red-600 font-bold">*</td>
                                                <td class="px-2 py-2 text-orange-700">Dispositivo da cui parte il cavo</td>
                                            </tr>
                                            <tr class="bg-orange-50">
                                                <td class="px-2 py-2 font-semibold text-orange-800">üîå From Port</td>
                                                <td class="px-2 py-2 text-red-600 font-bold">*</td>
                                                <td class="px-2 py-2 text-orange-700">Porta sorgente (solo disponibili)</td>
                                            </tr>
                                            <tr class="bg-amber-50">
                                                <td class="px-2 py-2 font-semibold text-amber-800" colspan="3">üì• DESTINAZIONE (Dove arriva il cavo)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-amber-700">üìç To Location</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-amber-700">Filtra dispositivi per sede (opzionale)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-amber-700">üóÇÔ∏è To Group</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-amber-700">Filtra dispositivi per gruppo (opzionale)</td>
                                            </tr>
                                            <tr class="bg-amber-50">
                                                <td class="px-2 py-2 font-semibold text-amber-800">üìü To Device</td>
                                                <td class="px-2 py-2 text-red-600 font-bold">*</td>
                                                <td class="px-2 py-2 text-amber-700">Dispositivo destinazione (o "External/ISP")</td>
                                            </tr>
                                            <tr class="bg-amber-50">
                                                <td class="px-2 py-2 font-semibold text-amber-800">üîå To Port</td>
                                                <td class="px-2 py-2 text-red-600 font-bold">*</td>
                                                <td class="px-2 py-2 text-amber-700">Porta destinazione (solo disponibili)</td>
                                            </tr>
                                            <tr class="bg-slate-50">
                                                <td class="px-2 py-2 font-semibold text-slate-800" colspan="3">üìã DETTAGLI CONNESSIONE</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-slate-700">üè∑Ô∏è Type</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-slate-700">Tipo connessione (LAN, WAN, Trunk, ecc.)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-slate-700">‚ö° Status</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-slate-700">Active / Disabled</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-slate-700">üîñ Cable ID</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-slate-700">Etichetta/numero del cavo fisico</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-slate-700">üé® Color</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-slate-700">Colore del cavo (per identificazione)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 text-slate-700">üìù Notes</td>
                                                <td class="px-2 py-2 text-slate-400">-</td>
                                                <td class="px-2 py-2 text-slate-700">Note libere</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <!-- Tipi di connessione -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üè∑Ô∏è Tipi di Connessione e Colori</h3>
                                <div class="grid grid-cols-2 md:grid-cols-3 gap-2 text-xs">
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#3b82f6"></span>
                                        <span><strong>LAN</strong> - Rete locale</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#ef4444"></span>
                                        <span><strong>WAN</strong> - Internet/WAN</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#f97316"></span>
                                        <span><strong>DMZ</strong> - Zona demilitarizzata</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#22c55e"></span>
                                        <span><strong>Trunk</strong> - Uplink/Aggregazione</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#8b5cf6"></span>
                                        <span><strong>Management</strong> - Gestione</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#eab308"></span>
                                        <span><strong>Backup</strong> - Collegamento backup</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#06b6d4"></span>
                                        <span><strong>Fiber</strong> - Fibra ottica</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#a78bfa"></span>
                                        <span><strong>Wall Jack</strong> - Presa a muro</span>
                                    </div>
                                    <div class="flex items-center gap-2 p-2 rounded bg-slate-50">
                                        <span class="w-4 h-4 rounded" style="background:#ec4899"></span>
                                        <span><strong>External</strong> - Connessione esterna</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Patch Panel speciale -->
                            <div class="bg-purple-100 rounded-lg p-4 border border-purple-300">
                                <h3 class="font-bold text-purple-900 mb-2">üìå Funzionalit√† Speciale: Patch Panel</h3>
                                <p class="text-purple-800 text-sm mb-2">I <strong>Patch Panel</strong> hanno una logica speciale: ogni porta pu√≤ avere <strong>2 connessioni</strong> (fronte e retro).</p>
                                <div class="bg-white p-3 rounded-lg text-xs">
                                    <p class="font-semibold text-purple-900 mb-1">Esempio:</p>
                                    <ol class="text-purple-700 list-decimal ml-4 space-y-1">
                                        <li>Wall Jack (parete) ‚Üí Patch Panel porta 19 (RETRO)</li>
                                        <li>Patch Panel porta 19 ‚Üí Switch porta 33 (FRONTE)</li>
                                    </ol>
                                    <p class="text-purple-600 mt-2">Indicatori: <code class="bg-purple-200 px-1 rounded">(Libera)</code>, <code class="bg-purple-200 px-1 rounded">(1/2)</code>, <code class="bg-purple-200 px-1 rounded">(2/2 - completa)</code></p>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-orange-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 5. SCHEDA TOPOLOGY ========== -->
                    <div class="bg-cyan-50 border-l-4 border-cyan-500 rounded-r-xl p-5 mb-6" id="help-topology">
                        <h2 class="text-xl font-bold text-cyan-800 mb-3 flex items-center gap-2">
                            <span class="bg-cyan-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">5</span>
                            üó∫Ô∏è Scheda Topology (Mappa di Rete)
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-cyan-200">
                                <h3 class="font-bold text-cyan-900 mb-2">üìã Descrizione</h3>
                                <p class="text-cyan-800 text-sm">Visualizzazione grafica interattiva della rete con <strong>icone stile Cisco</strong>. Mostra dispositivi come nodi e connessioni come linee colorate.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-cyan-200">
                                <h3 class="font-bold text-cyan-900 mb-2">üéõÔ∏è Controlli Disponibili</h3>
                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üìç Filtro Location:</strong> Mostra solo una sede
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üóÇÔ∏è Filtro Group:</strong> Mostra solo un gruppo
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üîÑ Layout:</strong> Auto, Circle, Grid, Hierarchical
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üó∫Ô∏è Fit View:</strong> Centra e adatta la vista
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üìã Legend:</strong> Mostra legenda dispositivi
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üì∑ Export PNG:</strong> Scarica immagine
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded">
                                        <strong>üì• Export .drawio:</strong> Esporta per Draw.io
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-cyan-200">
                                <h3 class="font-bold text-cyan-900 mb-2">üñ±Ô∏è Interazioni Mouse</h3>
                                <div class="grid md:grid-cols-2 gap-2 text-xs">
                                    <div class="bg-cyan-100 p-2 rounded">üñ±Ô∏è <strong>Drag dispositivo:</strong> Riposiziona</div>
                                    <div class="bg-cyan-100 p-2 rounded">üñ±Ô∏è <strong>Drag sfondo:</strong> Pan (sposta vista)</div>
                                    <div class="bg-cyan-100 p-2 rounded">‚öôÔ∏è <strong>Scroll:</strong> Zoom in/out</div>
                                    <div class="bg-cyan-100 p-2 rounded">üëÜ <strong>Hover:</strong> Mostra dettagli</div>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-cyan-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 6. SCHEDA MATRIX ========== -->
                    <div class="bg-pink-50 border-l-4 border-pink-500 rounded-r-xl p-5 mb-6" id="help-matrix">
                        <h2 class="text-xl font-bold text-pink-800 mb-3 flex items-center gap-2">
                            <span class="bg-pink-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">6</span>
                            üìä Scheda Matrix (Matrice Connessioni)
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-pink-200">
                                <h3 class="font-bold text-pink-900 mb-2">üìã Descrizione</h3>
                                <p class="text-pink-800 text-sm">Una <strong>griglia visuale</strong> che mostra tutte le connessioni in formato tabellare. Righe = dispositivi sorgente, Colonne = dispositivi destinazione.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-pink-200">
                                <h3 class="font-bold text-pink-900 mb-2">üìñ Come Leggere la Matrice</h3>
                                <div class="bg-slate-50 p-3 rounded-lg text-xs font-mono">
<pre>          ‚îÇ Device-A ‚îÇ Device-B ‚îÇ Device-C ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
Device-A  ‚îÇ    -     ‚îÇ   üîµ     ‚îÇ          ‚îÇ
Device-B  ‚îÇ   üîµ     ‚îÇ    -     ‚îÇ   üü¢     ‚îÇ
Device-C  ‚îÇ          ‚îÇ   üü¢     ‚îÇ    -     ‚îÇ</pre>
                                </div>
                                <ul class="text-pink-700 text-xs mt-2 space-y-1">
                                    <li>üîµ = Connessione LAN tra Device-A e Device-B</li>
                                    <li>üü¢ = Connessione Trunk tra Device-B e Device-C</li>
                                    <li>Vuoto = Nessuna connessione</li>
                                </ul>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-pink-200">
                                <h3 class="font-bold text-pink-900 mb-2">üéõÔ∏è Controlli</h3>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">üìç Filtro Location</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">üóÇÔ∏è Filtro Group</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">‚òëÔ∏è Solo connessi</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">‚ûï/‚ûñ Zoom</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">üìä Fit View</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">üì∑ Export PNG</span>
                                    <span class="bg-pink-100 text-pink-800 px-2 py-1 rounded">üñ®Ô∏è Print</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-pink-200">
                                <h3 class="font-bold text-pink-900 mb-2">üëÜ Interazioni</h3>
                                <ul class="text-pink-700 text-xs space-y-1">
                                    <li><strong>Click su cella:</strong> Modifica quella connessione</li>
                                    <li><strong>Hover su cella:</strong> Mostra dettagli (porte, tipo, cavo)</li>
                                    <li><strong>Scroll:</strong> Zoom in/out</li>
                                    <li><strong>Drag:</strong> Pan (sposta vista)</li>
                                </ul>
                            </div>
                        </div>
                        <a href="#help-index" class="text-pink-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 7. SCHEDA FLOOR PLAN ========== -->
                    <div class="bg-emerald-50 border-l-4 border-emerald-500 rounded-r-xl p-5 mb-6" id="help-floorplan">
                        <h2 class="text-xl font-bold text-emerald-800 mb-3 flex items-center gap-2">
                            <span class="bg-emerald-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">7</span>
                            üè¢ Scheda Floor Plan (Planimetria)
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-emerald-200">
                                <h3 class="font-bold text-emerald-900 mb-2">üìã Descrizione</h3>
                                <p class="text-emerald-800 text-sm">Visualizzazione delle <strong>stanze fisiche</strong> della sede con i dispositivi associati. Permette di vedere dove sono posizionati fisicamente i dispositivi.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-emerald-200">
                                <h3 class="font-bold text-emerald-900 mb-3">üìù Struttura delle Stanze</h3>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-xs">
                                        <thead class="bg-emerald-100">
                                            <tr>
                                                <th class="px-2 py-1 text-left font-bold text-emerald-900">Campo</th>
                                                <th class="px-2 py-1 text-left font-bold text-emerald-900">Descrizione</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-emerald-100">
                                            <tr>
                                                <td class="px-2 py-2 font-semibold text-emerald-800">üÜî ID</td>
                                                <td class="px-2 py-2 text-emerald-700">Identificativo numerico automatico (1, 2, 3...)</td>
                                            </tr>
                                            <tr class="bg-emerald-50">
                                                <td class="px-2 py-2 font-semibold text-emerald-800">üè∑Ô∏è Nickname</td>
                                                <td class="px-2 py-2 text-emerald-700">Nome descrittivo (es. "Sala Server", "Ufficio 12"). <strong class="text-red-600">Usato per associare dispositivi!</strong></td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 font-semibold text-emerald-800">üî∑ Polygon</td>
                                                <td class="px-2 py-2 text-emerald-700">Forma della stanza (poligono con coordinate X/Y)</td>
                                            </tr>
                                            <tr class="bg-emerald-50">
                                                <td class="px-2 py-2 font-semibold text-emerald-800">üé® Color</td>
                                                <td class="px-2 py-2 text-emerald-700">Colore di riempimento (RGBA per trasparenza)</td>
                                            </tr>
                                            <tr>
                                                <td class="px-2 py-2 font-semibold text-emerald-800">üìê Area</td>
                                                <td class="px-2 py-2 text-emerald-700">Area calcolata automaticamente dal poligono</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="bg-amber-100 rounded-lg p-4 border border-amber-300">
                                <h3 class="font-bold text-amber-900 mb-2">üîó Come Associare Dispositivi a una Stanza</h3>
                                <p class="text-amber-800 text-sm mb-2">L'associazione <strong>NON</strong> √® diretta dalla stanza. Invece:</p>
                                <ol class="text-amber-700 text-xs list-decimal ml-4 space-y-1">
                                    <li>Vai nella stanza e imposta un <strong>Nickname</strong> (es. "Sala Server")</li>
                                    <li>Vai alla scheda <strong>Devices</strong></li>
                                    <li>Modifica il dispositivo e imposta <strong>Location</strong> = "Sala Server" (stesso nickname)</li>
                                    <li>Il dispositivo apparir√† automaticamente nella stanza!</li>
                                </ol>
                                <p class="text-amber-600 text-xs mt-2">üí° La Location del dispositivo deve corrispondere esattamente al Nickname della stanza.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-emerald-200">
                                <h3 class="font-bold text-emerald-900 mb-2">üéõÔ∏è Controlli</h3>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded">‚ûï/‚ûñ Zoom</span>
                                    <span class="bg-emerald-100 text-emerald-800 px-2 py-1 rounded">üîÑ Reset</span>
                                </div>
                                <p class="text-emerald-600 text-xs mt-2">üí° Le stanze sono mappate tramite uno strumento separato (draw-rooms-v2.html)</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-emerald-200">
                                <h3 class="font-bold text-emerald-900 mb-2">üñ±Ô∏è Interazioni</h3>
                                <ul class="text-emerald-700 text-xs space-y-1">
                                    <li><strong>Click su stanza:</strong> Mostra dettagli e dispositivi associati</li>
                                    <li><strong>Hover su stanza:</strong> Evidenzia la stanza</li>
                                    <li><strong>Scroll:</strong> Zoom in/out</li>
                                    <li><strong>Drag sfondo:</strong> Pan (sposta vista)</li>
                                </ul>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-emerald-200">
                                <h3 class="font-bold text-emerald-900 mb-2">üìç Legenda Stanze</h3>
                                <p class="text-emerald-700 text-xs">In alto a destra appare la legenda con ID e Nickname di ogni stanza. Stanze con dispositivi mostrano un badge numerico.</p>
                            </div>

                            <!-- Sezione Immagine di Sfondo -->
                            <div class="bg-gradient-to-r from-sky-50 to-cyan-50 rounded-lg p-4 border border-sky-300">
                                <h3 class="font-bold text-sky-900 mb-2">üñºÔ∏è Immagine di Sfondo (Planimetria)</h3>
                                <p class="text-sky-800 text-sm mb-3">Il Floor Plan utilizza un'immagine PNG come sfondo per posizionare le stanze sopra la planimetria reale dell'edificio.</p>
                                
                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-white p-3 rounded-lg border border-sky-200">
                                        <span class="font-bold text-sky-900">üìÅ Posizione del file:</span>
                                        <p class="text-sky-700 mt-1 font-mono bg-sky-100 p-2 rounded">assets/planta.png</p>
                                    </div>
                                    <div class="bg-white p-3 rounded-lg border border-sky-200">
                                        <span class="font-bold text-sky-900">üìê Dimensioni consigliate:</span>
                                        <p class="text-sky-700 mt-1">2782 √ó 1292 pixel (o proporzioni simili)</p>
                                    </div>
                                </div>

                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 mt-3">
                                    <p class="font-semibold text-amber-900 text-xs mb-2">‚ö†Ô∏è Come sostituire l'immagine:</p>
                                    <ol class="text-amber-700 text-xs ml-4 list-decimal space-y-1">
                                        <li>Prepara la tua planimetria in formato PNG</li>
                                        <li>Rinomina il file come <code class="bg-amber-200 px-1 rounded">planta.png</code></li>
                                        <li>Sostituisci il file in <code class="bg-amber-200 px-1 rounded">/var/www/html/matrix/assets/planta.png</code></li>
                                        <li>Se le dimensioni sono diverse, aggiorna i valori in <code class="bg-amber-200 px-1 rounded">js/floorplan.js</code></li>
                                        <li>Ridisegna le stanze usando <code class="bg-amber-200 px-1 rounded">draw-rooms-v2.html</code></li>
                                    </ol>
                                </div>

                                <div class="bg-white p-3 rounded-lg border border-sky-200 mt-3">
                                    <span class="font-bold text-sky-900 text-xs">üí° Suggerimenti per l'immagine:</span>
                                    <ul class="text-sky-700 text-xs mt-1 ml-3 list-disc space-y-1">
                                        <li>Usa immagini ad alta risoluzione per migliore qualit√†</li>
                                        <li>Formati supportati: PNG (trasparenza), JPG</li>
                                        <li>Evita file troppo pesanti (&gt;5MB) per performance</li>
                                        <li>Mantieni proporzioni coerenti con il disegno delle stanze</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-emerald-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 8. SCHEDA LOGS ========== -->
                    <div class="bg-amber-50 border-l-4 border-amber-500 rounded-r-xl p-5 mb-6" id="help-logs">
                        <h2 class="text-xl font-bold text-amber-800 mb-3 flex items-center gap-2">
                            <span class="bg-amber-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">8</span>
                            üìã Scheda Activity Logs
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                <h3 class="font-bold text-amber-900 mb-2">üìã Descrizione</h3>
                                <p class="text-amber-800 text-sm">Registro delle <strong>ultime 200 modifiche</strong> effettuate al sistema. Utile per tracciare chi ha fatto cosa e quando.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                <h3 class="font-bold text-amber-900 mb-2">üìä Informazioni per ogni Log</h3>
                                <div class="grid grid-cols-2 md:grid-cols-5 gap-2 text-xs">
                                    <div class="bg-amber-100 p-2 rounded text-center">üìÖ Timestamp</div>
                                    <div class="bg-amber-100 p-2 rounded text-center">üè∑Ô∏è Action</div>
                                    <div class="bg-amber-100 p-2 rounded text-center">üì¶ Type</div>
                                    <div class="bg-amber-100 p-2 rounded text-center">üìù Details</div>
                                    <div class="bg-amber-100 p-2 rounded text-center">üë§ User</div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                <h3 class="font-bold text-amber-900 mb-2">üîç Filtri Disponibili</h3>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    <span class="bg-slate-200 text-slate-800 px-2 py-1 rounded">All Activities</span>
                                    <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded">Devices</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded">Connections</span>
                                    <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded">Import/Export</span>
                                    <span class="bg-amber-100 text-amber-800 px-2 py-1 rounded">Authentication</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-amber-200">
                                <h3 class="font-bold text-amber-900 mb-2">‚ö° Azioni</h3>
                                <div class="flex flex-wrap gap-2 text-xs">
                                    <span class="bg-red-500 text-white px-2 py-1 rounded">üóëÔ∏è Clear Logs</span>
                                    <span class="bg-slate-500 text-white px-2 py-1 rounded">üì• Export Logs</span>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-amber-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 9. IMPORT/EXPORT ========== -->
                    <div class="bg-red-50 border-l-4 border-red-500 rounded-r-xl p-5 mb-6" id="help-export">
                        <h2 class="text-xl font-bold text-red-800 mb-3 flex items-center gap-2">
                            <span class="bg-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">9</span>
                            üíæ Import/Export e Backup
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-red-200">
                                <h3 class="font-bold text-red-900 mb-3">üì§ Funzioni di Esportazione</h3>
                                <div class="space-y-3">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-indigo-500 text-white px-2 py-0.5 rounded text-xs">üìä Export Excel</span>
                                            <span class="text-slate-500 text-xs">Pubblico</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Crea file .xlsx con 4 fogli: Devices, Connections, Matrix, Rooms</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-slate-500 text-white px-2 py-0.5 rounded text-xs">üíæ Export JSON</span>
                                            <span class="text-slate-500 text-xs">Pubblico</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Backup completo: devices, connections, rooms, version. Usalo per ripristini!</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-indigo-500 text-white px-2 py-0.5 rounded text-xs">üì∑ Export PNG</span>
                                            <span class="text-slate-500 text-xs">Topology/Matrix</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Immagine della topologia o matrice con titolo e data</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-orange-500 text-white px-2 py-0.5 rounded text-xs">üì• Export .drawio</span>
                                            <span class="text-slate-500 text-xs">Topology</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">File modificabile in Draw.io/diagrams.net</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-red-200">
                                <h3 class="font-bold text-red-900 mb-3">üì• Funzioni di Importazione</h3>
                                <div class="bg-slate-50 p-3 rounded-lg">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="bg-slate-500 text-white px-2 py-0.5 rounded text-xs">üì• Import JSON</span>
                                        <span class="text-red-500 text-xs font-bold">üîí Richiede Login</span>
                                    </div>
                                    <p class="text-slate-700 text-xs">Importa un file JSON precedentemente esportato. <strong class="text-red-600">ATTENZIONE:</strong> Sovrascrive TUTTI i dati esistenti!</p>
                                </div>
                            </div>

                            <!-- NEW v3.5.029: Data Integrity Section -->
                            <div class="bg-green-100 rounded-lg p-4 border border-green-300">
                                <h3 class="font-bold text-green-900 mb-3">üîê Integrit√† Dati (v3.5.029)</h3>
                                <p class="text-green-800 text-sm mb-3">A partire dalla versione 3.5.028, il sistema include protezioni avanzate per garantire l'integrit√† dei dati:</p>
                                
                                <div class="space-y-2">
                                    <div class="bg-white p-2 rounded-lg">
                                        <span class="font-bold text-green-900 text-xs">üîè SHA-256 Checksum</span>
                                        <p class="text-green-700 text-xs">Ogni export JSON include un hash crittografico SHA-256. All'import, il checksum viene verificato per garantire che il file non sia stato corrotto o modificato.</p>
                                    </div>
                                    <div class="bg-white p-2 rounded-lg">
                                        <span class="font-bold text-green-900 text-xs">üìã Validazione Versione</span>
                                        <p class="text-green-700 text-xs">Solo file JSON con versioni compatibili (3.1.3+) possono essere importati. Versioni non supportate vengono rifiutate.</p>
                                    </div>
                                    <div class="bg-white p-2 rounded-lg">
                                        <span class="font-bold text-green-900 text-xs">üîÑ Rollback Automatico</span>
                                        <p class="text-green-700 text-xs">Se l'import fallisce (checksum invalido, schema errato, etc.), i dati originali vengono automaticamente ripristinati.</p>
                                    </div>
                                    <div class="bg-white p-2 rounded-lg">
                                        <span class="font-bold text-green-900 text-xs">‚úÖ Validazione Schema</span>
                                        <p class="text-green-700 text-xs">Ogni dispositivo, connessione e stanza viene validato contro lo schema atteso. Campi obbligatori, tipi di dati e riferimenti vengono verificati.</p>
                                    </div>
                                </div>
                                
                                <div class="bg-green-200 p-2 rounded-lg mt-3">
                                    <p class="text-green-900 text-xs">üí° <strong>Versioni Supportate:</strong> 3.5.028, 3.5.005, 3.5.002, 3.5.001, 3.4.5, 3.4.2, 3.4.1, 3.4.0, 3.3.x, 3.2.x, 3.1.3</p>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-red-200">
                                <h3 class="font-bold text-red-900 mb-2">‚ö†Ô∏è Clear All (Svuota Tutto)</h3>
                                <p class="text-red-700 text-xs">Elimina TUTTI i dati (devices, connections, rooms). Prima dell'eliminazione viene creato automaticamente un backup JSON scaricabile.</p>
                                <p class="text-red-600 text-xs mt-1 font-bold">üîí Richiede Login</p>
                            </div>

                            <div class="bg-amber-100 rounded-lg p-4 border border-amber-300">
                                <h3 class="font-bold text-amber-900 mb-2">üí° Best Practice per i Backup</h3>
                                <ol class="text-amber-800 text-xs list-decimal ml-4 space-y-1">
                                    <li>Esporta JSON <strong>regolarmente</strong> (almeno settimanalmente)</li>
                                    <li>Conserva i backup in una <strong>cartella sicura</strong></li>
                                    <li>Usa nomi descrittivi: <code class="bg-amber-200 px-1 rounded">network_2026-02-01.json</code></li>
                                    <li>Prima di modifiche importanti, fai <strong>sempre</strong> un backup</li>
                                </ol>
                            </div>
                        </div>
                        <a href="#help-index" class="text-red-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 10. LOCATION MANAGER ========== -->
                    <div class="bg-violet-50 border-l-4 border-violet-500 rounded-r-xl p-5 mb-6" id="help-locations">
                        <h2 class="text-xl font-bold text-violet-800 mb-3 flex items-center gap-2">
                            <span class="bg-violet-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">10</span>
                            üìç Location Manager (Gestione Sedi)
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-violet-200">
                                <h3 class="font-bold text-violet-900 mb-2">üìã Descrizione</h3>
                                <p class="text-violet-800 text-sm">Il <strong>Location Manager</strong> permette di gestire tutte le sedi/location del sistema. Mostra sia le location mappate automaticamente dalle stanze del Floor Plan, sia le location custom create manualmente.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-violet-200">
                                <h3 class="font-bold text-violet-900 mb-2">üöÄ Come Accedere</h3>
                                <p class="text-violet-700 text-sm mb-2">Clicca il pulsante <span class="bg-violet-500 text-white px-2 py-0.5 rounded text-xs">üìç Locations</span> nella barra delle azioni in alto.</p>
                                <p class="text-violet-600 text-xs">üí° Il pulsante si trova vicino ai contatori di Devices/Connections.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-violet-200">
                                <h3 class="font-bold text-violet-900 mb-3">üìä Tipi di Location</h3>
                                <div class="grid md:grid-cols-2 gap-3">
                                    <div class="bg-emerald-50 p-3 rounded-lg border-l-4 border-emerald-500">
                                        <span class="font-bold text-emerald-800">üó∫Ô∏è Mapped Rooms</span>
                                        <p class="text-emerald-700 text-xs mt-1">Location derivate automaticamente dalle stanze del Floor Plan. Corrispondono ai nickname delle stanze.</p>
                                        <ul class="text-emerald-600 text-xs mt-2 ml-3 list-disc">
                                            <li>Sincronizzate con il Floor Plan</li>
                                            <li>Il nickname pu√≤ essere modificato</li>
                                            <li>Non eliminabili direttamente qui</li>
                                        </ul>
                                    </div>
                                    <div class="bg-blue-50 p-3 rounded-lg border-l-4 border-blue-500">
                                        <span class="font-bold text-blue-800">üìù Custom Locations</span>
                                        <p class="text-blue-700 text-xs mt-1">Location create manualmente che non corrispondono a stanze nel Floor Plan.</p>
                                        <ul class="text-blue-600 text-xs mt-2 ml-3 list-disc">
                                            <li>Create automaticamente dai dispositivi</li>
                                            <li>Possono essere rinominate</li>
                                            <li>Possono essere eliminate</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-violet-200">
                                <h3 class="font-bold text-violet-900 mb-2">‚ö° Funzioni Disponibili</h3>
                                <div class="space-y-2 text-xs">
                                    <div class="bg-slate-50 p-2 rounded flex items-center gap-2">
                                        <span class="bg-blue-500 text-white px-2 py-0.5 rounded">‚úèÔ∏è Edit</span>
                                        <span class="text-slate-700">Modifica il nickname/nome della location</span>
                                    </div>
                                    <div class="bg-slate-50 p-2 rounded flex items-center gap-2">
                                        <span class="bg-red-500 text-white px-2 py-0.5 rounded">üóëÔ∏è Delete</span>
                                        <span class="text-slate-700">Elimina una location custom (con riassegnazione dispositivi)</span>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-amber-100 rounded-lg p-4 border border-amber-300">
                                <h3 class="font-bold text-amber-900 mb-2">‚ö†Ô∏è Eliminazione Location</h3>
                                <p class="text-amber-800 text-sm">Quando elimini una location custom:</p>
                                <ul class="text-amber-700 text-xs mt-2 ml-4 list-disc space-y-1">
                                    <li>Ti verr√† chiesto di scegliere una <strong>nuova location</strong> per i dispositivi esistenti</li>
                                    <li>Tutti i dispositivi verranno automaticamente riassegnati</li>
                                    <li>Le location mappate (Floor Plan) <strong>non possono essere eliminate</strong> da qui</li>
                                </ul>
                            </div>
                        </div>
                        <a href="#help-index" class="text-violet-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 11. STAMPA ========== -->
                    <div class="bg-rose-50 border-l-4 border-rose-500 rounded-r-xl p-5 mb-6" id="help-print">
                        <h2 class="text-xl font-bold text-rose-800 mb-3 flex items-center gap-2">
                            <span class="bg-rose-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">11</span>
                            üñ®Ô∏è Stampa e Esportazione PNG
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-rose-200">
                                <h3 class="font-bold text-rose-900 mb-2">üìã Descrizione</h3>
                                <p class="text-rose-800 text-sm">Il sistema offre diverse opzioni di stampa per documentare la rete. Le stampe sono ottimizzate per la leggibilit√† su carta.</p>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-rose-200">
                                <h3 class="font-bold text-rose-900 mb-3">üñ®Ô∏è Modalit√† di Stampa</h3>
                                <div class="space-y-3">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-rose-500 text-white px-2 py-0.5 rounded text-xs">üñ®Ô∏è Print (Filtered)</span>
                                            <span class="text-slate-500 text-xs">Barra Azioni</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Stampa la scheda attiva (Devices o Connections) rispettando il filtro Location attivo.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-pink-500 text-white px-2 py-0.5 rounded text-xs">üñ®Ô∏è Print Matrix</span>
                                            <span class="text-slate-500 text-xs">Scheda Matrix</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Stampa la matrice delle connessioni con tutti i colori preservati.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <div class="flex items-center gap-2 mb-1">
                                            <span class="bg-orange-500 text-white px-2 py-0.5 rounded text-xs">üñ®Ô∏è Print Connections</span>
                                            <span class="text-slate-500 text-xs">Scheda Connections</span>
                                        </div>
                                        <p class="text-slate-700 text-xs">Stampa l'elenco delle connessioni attive.</p>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-rose-200">
                                <h3 class="font-bold text-rose-900 mb-2">üìÑ Contenuto Stampa Devices</h3>
                                <div class="grid grid-cols-4 md:grid-cols-8 gap-1 text-xs">
                                    <span class="bg-rose-100 p-1 rounded text-center">Location</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Rack</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Pos</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Name</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Type</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Brand</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">IPs</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Status</span>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-rose-200">
                                <h3 class="font-bold text-rose-900 mb-2">üìÑ Contenuto Stampa Connections</h3>
                                <div class="grid grid-cols-3 md:grid-cols-7 gap-1 text-xs">
                                    <span class="bg-rose-100 p-1 rounded text-center">Cable ID</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">From</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Port</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">To</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Port</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Type</span>
                                    <span class="bg-rose-100 p-1 rounded text-center">Status</span>
                                </div>
                            </div>

                            <div class="bg-green-100 rounded-lg p-4 border border-green-300">
                                <h3 class="font-bold text-green-900 mb-2">üí° Suggerimenti per la Stampa</h3>
                                <ul class="text-green-800 text-xs space-y-1 list-disc ml-4">
                                    <li>Usa il <strong>filtro Location</strong> prima di stampare per documenti pi√π specifici</li>
                                    <li>La stampa apre una <strong>nuova finestra</strong> del browser</li>
                                    <li>Se la finestra non si apre, <strong>abilita i popup</strong> per questo sito</li>
                                    <li>Ogni stampa include <strong>data e ora</strong> di generazione</li>
                                    <li>I <strong>dispositivi disabilitati</strong> appaiono in grigio</li>
                                </ul>
                            </div>
                        </div>
                        <a href="#help-index" class="text-rose-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 12. FLUSSO DI LAVORO ========== -->
                    <div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-r-xl p-5 mb-6" id="help-workflow">
                        <h2 class="text-xl font-bold text-yellow-800 mb-3 flex items-center gap-2">
                            <span class="bg-yellow-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">12</span>
                            üîÑ Flusso di Lavoro Consigliato
                        </h2>
                        
                        <div class="space-y-4">
                            <div class="bg-white rounded-lg p-4 border border-yellow-200">
                                <h3 class="font-bold text-yellow-900 mb-3">üìã Workflow per Nuova Installazione</h3>
                                <div class="bg-slate-50 p-4 rounded-lg font-mono text-xs">
<pre class="text-slate-700">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  1Ô∏è‚É£  LOGIN                                                   ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Clicca "Edit Mode" ‚Üí Inserisci credenziali         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  2Ô∏è‚É£  CREA DISPOSITIVI (Scheda Devices)                      ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Definisci Location (sede)                          ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Definisci Group (rack/stanza)                      ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Aggiungi tutti i dispositivi                       ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ ‚ö†Ô∏è Configura le PORTE per ogni dispositivo!        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  3Ô∏è‚É£  CREA CONNESSIONI (Scheda Connections)                  ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Seleziona dispositivo sorgente + porta             ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Seleziona dispositivo destinazione + porta         ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Aggiungi tipo, colore cavo, ID                     ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Ripeti per ogni cavo fisico                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  4Ô∏è‚É£  CONFIGURA FLOOR PLAN (Scheda Floor Plan)               ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Crea le stanze                                     ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Posiziona e dimensiona                             ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Associa dispositivi alle stanze                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  5Ô∏è‚É£  VERIFICA (Schede Topology e Matrix)                    ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Controlla la topologia visuale                     ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ Verifica la matrice delle connessioni              ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ Correggi eventuali errori                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  6Ô∏è‚É£  SALVA E BACKUP                                         ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ üíæ Clicca "Save Now"                               ‚îÇ
‚îÇ      ‚îú‚îÄ‚îÄ üìä Esporta Excel per documentazione                ‚îÇ
‚îÇ      ‚îî‚îÄ‚îÄ üíæ Esporta JSON per backup                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
</pre>
                                </div>
                            </div>

                            <div class="bg-white rounded-lg p-4 border border-yellow-200">
                                <h3 class="font-bold text-yellow-900 mb-2">‚ö° Workflow per Modifiche Rapide</h3>
                                <ol class="text-yellow-800 text-xs list-decimal ml-4 space-y-1">
                                    <li>Login (se necessario)</li>
                                    <li>Vai alla scheda appropriata (Devices o Connections)</li>
                                    <li>Trova l'elemento da modificare</li>
                                    <li>Clicca "Edit" ‚Üí Modifica ‚Üí "Update"</li>
                                    <li><strong>üíæ Save Now</strong></li>
                                </ol>
                            </div>
                        </div>
                        <a href="#help-index" class="text-yellow-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 13. GLOSSARIO ========== -->
                    <div class="bg-indigo-50 border-l-4 border-indigo-500 rounded-r-xl p-5 mb-6" id="help-glossary">
                        <h2 class="text-xl font-bold text-indigo-800 mb-3 flex items-center gap-2">
                            <span class="bg-indigo-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">13</span>
                            üìñ Glossario dei Termini
                        </h2>
                        
                        <div class="bg-white rounded-lg p-4 border border-indigo-200">
                            <div class="grid md:grid-cols-2 gap-3 text-xs">
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Location</strong>
                                    <p class="text-slate-600">Sede fisica o reparto (es. "Sede Ivrea", "Ufficio Milano")</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Group</strong>
                                    <p class="text-slate-600">Raggruppamento logico (rack, armadio, stanza, zona)</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Order</strong>
                                    <p class="text-slate-600">Posizione fisica nel rack (01-99) o 00 per sparsi</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Rear (R)</strong>
                                    <p class="text-slate-600">Indica dispositivo montato sul retro del rack</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Patch Panel</strong>
                                    <p class="text-slate-600">Pannello con porte passanti (fronte ‚Üî retro)</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Wall Jack</strong>
                                    <p class="text-slate-600">Presa di rete a muro</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Trunk/Uplink</strong>
                                    <p class="text-slate-600">Connessione principale tra switch</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">CIDR</strong>
                                    <p class="text-slate-600">Notazione IP con maschera (es. 192.168.1.1/24)</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">SFP/SFP+</strong>
                                    <p class="text-slate-600">Porta per moduli ottici intercambiabili</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">PoE</strong>
                                    <p class="text-slate-600">Power over Ethernet - alimentazione via cavo rete</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">DMZ</strong>
                                    <p class="text-slate-600">Demilitarized Zone - rete semi-pubblica</p>
                                </div>
                                <div class="bg-slate-50 p-2 rounded">
                                    <strong class="text-indigo-900">Topology</strong>
                                    <p class="text-slate-600">Rappresentazione grafica della struttura di rete</p>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-indigo-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 14. FAQ ========== -->
                    <div class="bg-teal-50 border-l-4 border-teal-500 rounded-r-xl p-5 mb-6" id="help-faq">
                        <h2 class="text-xl font-bold text-teal-800 mb-3 flex items-center gap-2">
                            <span class="bg-teal-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">14</span>
                            ‚ùì Domande Frequenti (FAQ)
                        </h2>
                        
                        <div class="space-y-3">
                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Come faccio il login?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Clicca <span class="bg-blue-500 text-white px-2 py-0.5 rounded text-xs">üîì Edit Mode</span> in alto a destra, inserisci username e password forniti dall'amministratore.</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Cosa significa Order = 00?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Order 00 indica un dispositivo "sparso" non montato in un rack (es. access point sul soffitto, router in altra stanza).</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Quando uso il checkbox "Rear"?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Quando il dispositivo √® montato nella parte posteriore del rack. Convenzione: fronte 01-50, retro 99-50.</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Cosa significa * prima del nome?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Un asterisco <strong class="text-red-600">*</strong> indica che il dispositivo √® <strong>disabilitato</strong> (Status = Disabled).</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Come funzionano le porte del Patch Panel?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Ogni porta del patch panel pu√≤ avere fino a 2 connessioni (fronte e retro), permettendo di collegare wall jack e switch alla stessa porta.</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Pi√π persone possono usarlo insieme?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">S√¨, ma attenzione: l'ultima persona a salvare sovrascriver√† le modifiche degli altri. Coordinarsi!</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Non vedo una porta che mi serve. Cosa faccio?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Vai alla scheda Devices, trova il dispositivo, clicca Edit e aggiungi pi√π porte con "+ Add Port Type".</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Come faccio backup dei dati?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Clicca "Export JSON" regolarmente e conserva il file in posto sicuro. Per ripristinare usa "Import JSON".</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">Come associo dispositivi a una stanza?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">Imposta il <strong>Nickname</strong> della stanza nel Floor Plan, poi modifica il dispositivo nella scheda Devices e imposta <strong>Location</strong> con lo stesso valore del Nickname.</p>
                            </details>

                            <details class="bg-white rounded-lg border border-teal-200">
                                <summary class="font-semibold text-teal-900 p-3 cursor-pointer hover:bg-teal-50">I dati vengono salvati automaticamente?</summary>
                                <p class="text-teal-700 text-sm p-3 pt-0">NO! Devi sempre cliccare <span class="bg-green-600 text-white px-2 py-0.5 rounded text-xs">üíæ Save Now</span> per salvare le modifiche sul server.</p>
                            </details>
                        </div>
                        <a href="#help-index" class="text-teal-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== 15. INSTALLAZIONE DEL SISTEMA ========== -->
                    <div class="bg-gradient-to-r from-orange-50 to-red-50 border-l-4 border-orange-500 rounded-r-xl p-5 mb-6" id="help-install">
                        <h2 class="text-xl font-bold text-orange-800 mb-3 flex items-center gap-2">
                            <span class="bg-gradient-to-r from-orange-500 to-red-500 text-white rounded-full w-8 h-8 flex items-center justify-center text-sm">15</span>
                            üõ†Ô∏è Installazione del Sistema (Guida per Amministratori)
                        </h2>
                        
                        <div class="space-y-4">
                            <!-- Introduzione -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-2">üìã Panoramica</h3>
                                <p class="text-orange-800 text-sm mb-3">Questa sezione spiega come installare TIESSE Matrix Network su un server Ubuntu con Apache. Il sistema √® un'applicazione web che funziona su server interno (intranet) e non richiede connessione internet dopo l'installazione.</p>
                                
                                <div class="bg-orange-50 border border-orange-200 rounded-lg p-3">
                                    <p class="font-semibold text-orange-900 text-sm mb-2">üìå Requisiti di Sistema:</p>
                                    <ul class="text-orange-700 text-sm ml-4 list-disc space-y-1">
                                        <li><strong>Sistema Operativo:</strong> Ubuntu 22.04 LTS o 24.04 LTS (consigliato)</li>
                                        <li><strong>Server Web:</strong> Apache 2.4+ con mod_rewrite</li>
                                        <li><strong>PHP:</strong> PHP 8.1+ con estensioni JSON e mbstring</li>
                                        <li><strong>Strumenti:</strong> unzip (per estrarre file)</li>
                                        <li><strong>Memoria:</strong> Minimo 512MB RAM</li>
                                        <li><strong>Disco:</strong> Minimo 100MB spazio libero</li>
                                        <li><strong>Rete:</strong> IP fisso nella rete locale</li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Passo 1: Preparazione Ubuntu -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üì¶ Passo 1: Preparazione del Server Ubuntu</h3>
                                <p class="text-orange-800 text-sm mb-3">Prima di tutto, aggiornare il sistema e installare i pacchetti necessari:</p>
                                
                                <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 mb-3 overflow-x-auto">
<pre><span class="text-slate-500"># Aggiornare lista pacchetti e sistema</span>
<span class="text-cyan-400">sudo</span> apt update && <span class="text-cyan-400">sudo</span> apt upgrade -y

<span class="text-slate-500"># Installare Apache, PHP e strumenti</span>
<span class="text-cyan-400">sudo</span> apt install -y apache2 php php-json php-mbstring unzip

<span class="text-slate-500"># Verificare se Apache √® in esecuzione</span>
<span class="text-cyan-400">sudo</span> systemctl status apache2

<span class="text-slate-500"># Abilitare Apache all'avvio del sistema</span>
<span class="text-cyan-400">sudo</span> systemctl enable apache2</pre>
                                </div>

                                <div class="bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs">
                                    <p class="font-semibold text-blue-900 mb-1">üí° Verifica dell'installazione:</p>
                                    <p class="text-blue-700">Aprire un browser e accedere a <code class="bg-blue-200 px-1 rounded">http://IP_DEL_SERVER</code>. Dovresti vedere la pagina predefinita di Apache "It works!".</p>
                                </div>
                            </div>

                            <!-- Passo 2: Installare Matrix -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üìÇ Passo 2: Installare Matrix Network</h3>
                                <p class="text-orange-800 text-sm mb-3">Copiare la cartella <code class="bg-orange-200 px-1 rounded">Matrix</code> sul server e configurare i permessi:</p>
                                
                                <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 mb-3 overflow-x-auto">
<pre><span class="text-slate-500"># Opzione A: Se hai la cartella Matrix su pendrive/HD esterno</span>
<span class="text-slate-500"># Montare il dispositivo e copiare:</span>
<span class="text-cyan-400">sudo</span> cp -r /media/utente/PENDRIVE/Matrix /var/www/html/matrix

<span class="text-slate-500"># Opzione B: Se hai un file matrix.zip</span>
<span class="text-cyan-400">sudo</span> unzip matrix.zip -d /var/www/html/

<span class="text-slate-500"># Rinominare in minuscolo (standardizzazione)</span>
<span class="text-cyan-400">sudo</span> mv /var/www/html/Matrix /var/www/html/matrix 2>/dev/null || true</pre>
                                </div>

                                <div class="bg-amber-50 border border-amber-200 rounded-lg p-3 text-xs">
                                    <p class="font-semibold text-amber-900 mb-1">‚ö†Ô∏è Struttura cartelle prevista:</p>
                                    <div class="bg-slate-800 rounded p-2 font-mono text-green-400 mt-2">
<pre>/var/www/html/matrix/
‚îú‚îÄ‚îÄ index.html          <span class="text-slate-500"># Pagina principale</span>
‚îú‚îÄ‚îÄ data.php            <span class="text-slate-500"># API dati</span>
‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îî‚îÄ‚îÄ auth.php        <span class="text-slate-500"># API autenticazione</span>
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ config.php      <span class="text-slate-500"># Configurazione</span>
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îî‚îÄ‚îÄ network_manager.json  <span class="text-slate-500"># Dati della rete</span>
‚îú‚îÄ‚îÄ js/                 <span class="text-slate-500"># Script JavaScript</span>
‚îú‚îÄ‚îÄ css/                <span class="text-slate-500"># Stili CSS</span>
‚îî‚îÄ‚îÄ assets/             <span class="text-slate-500"># Librerie e risorse</span></pre>
                                    </div>
                                </div>
                            </div>

                            <!-- Passo 3: Permessi -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üîê Passo 3: Configurare i Permessi</h3>
                                <p class="text-orange-800 text-sm mb-3">Configurare i permessi corretti affinch√© Apache possa leggere e scrivere i dati:</p>
                                
                                <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 mb-3 overflow-x-auto">
<pre><span class="text-slate-500"># Impostare proprietario per l'utente Apache</span>
<span class="text-cyan-400">sudo</span> chown -R www-data:www-data /var/www/html/matrix

<span class="text-slate-500"># Impostare permessi: 755 per cartelle, 644 per file</span>
<span class="text-cyan-400">sudo</span> find /var/www/html/matrix -type d -exec chmod 755 {} \;
<span class="text-cyan-400">sudo</span> find /var/www/html/matrix -type f -exec chmod 644 {} \;

<span class="text-slate-500"># Permesso di scrittura per la cartella dati (importante!)</span>
<span class="text-cyan-400">sudo</span> chmod 775 /var/www/html/matrix/data
<span class="text-cyan-400">sudo</span> chmod 664 /var/www/html/matrix/data/network_manager.json</pre>
                                </div>

                                <div class="bg-red-50 border border-red-200 rounded-lg p-3 text-xs">
                                    <p class="font-semibold text-red-900 mb-1">‚ö†Ô∏è Molto Importante:</p>
                                    <p class="text-red-700">La cartella <code class="bg-red-200 px-1 rounded">/var/www/html/matrix/data</code> DEVE avere permesso di scrittura per l'utente <code class="bg-red-200 px-1 rounded">www-data</code>. Senza questo, il sistema non potr√† salvare le modifiche!</p>
                                </div>
                            </div>

                            <!-- Passo 4: Testare -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">‚úÖ Passo 4: Testare l'Installazione</h3>
                                <p class="text-orange-800 text-sm mb-3">Accedere al sistema tramite browser:</p>
                                
                                <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-3">
                                    <p class="font-semibold text-green-900 text-center text-lg mb-2">üåê Indirizzo di Accesso:</p>
                                    <p class="text-center">
                                        <code class="bg-green-200 text-green-900 px-4 py-2 rounded-lg text-lg font-bold">http://IP_DEL_SERVER/matrix/</code>
                                    </p>
                                    <p class="text-green-700 text-xs text-center mt-2">Esempio: <code class="bg-green-200 px-1 rounded">http://192.168.1.100/matrix/</code></p>
                                </div>

                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">‚úÖ Se ha funzionato:</span>
                                        <p class="text-slate-600 mt-1">Vedrai l'interfaccia di Matrix Network. Clicca su "Edit Mode" e accedi per testare le modifiche.</p>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">‚ùå Se c'√® un errore:</span>
                                        <p class="text-slate-600 mt-1">Verifica i log: <code class="bg-slate-200 px-1 rounded">sudo tail -f /var/log/apache2/error.log</code></p>
                                    </div>
                                </div>
                            </div>

                            <!-- Credenziali - SOLO nota per admin -->
                            <div class="bg-amber-50 border border-amber-300 rounded-lg p-4">
                                <h3 class="font-bold text-amber-900 mb-2">üîë Credenziali di Accesso</h3>
                                <p class="text-amber-800 text-sm">Le credenziali di accesso predefinite sono configurate nel file <code class="bg-amber-200 px-1 rounded">/var/www/html/matrix/config/config.php</code>. Contattare l'amministratore di sistema per ottenere le credenziali.</p>
                                <div class="bg-white border border-amber-200 rounded-lg p-3 mt-3 text-xs">
                                    <p class="font-semibold text-amber-900 mb-1">‚ö†Ô∏è Modifica della Password:</p>
                                    <p class="text-amber-700 mb-2">Per sicurezza, modificare la password predefinita:</p>
                                    <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs">
<pre><span class="text-slate-500"># Generare nuovo hash password nel terminale:</span>
php -r "echo password_hash('NuovaPassword', PASSWORD_DEFAULT);"
<span class="text-slate-500"># Copiare il risultato e sostituire in config.php</span></pre>
                                    </div>
                                </div>
                            </div>

                            <!-- Importare Dati -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üì• Passo 5: Importare Dati Esistenti</h3>
                                <p class="text-orange-800 text-sm mb-3">Se hai gi√† dati da un'installazione precedente, importali:</p>
                                
                                <div class="grid md:grid-cols-2 gap-3 text-xs">
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">üìã Opzione A: Via Interfaccia</span>
                                        <ol class="text-slate-600 mt-2 ml-4 list-decimal space-y-1">
                                            <li>Accedi a Matrix Network dal browser</li>
                                            <li>Clicca su "Edit Mode" e fai login</li>
                                            <li>Clicca su "Import JSON"</li>
                                            <li>Seleziona il file .json esportato precedentemente</li>
                                            <li>Clicca su "Save Now" per confermare</li>
                                        </ol>
                                    </div>
                                    <div class="bg-slate-50 p-3 rounded-lg">
                                        <span class="font-bold text-slate-800">üìã Opzione B: Via Terminale</span>
                                        <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs mt-2">
<pre><span class="text-slate-500"># Copiare file dati direttamente</span>
<span class="text-cyan-400">sudo</span> cp /percorso/backup.json \
  /var/www/html/matrix/data/network_manager.json
<span class="text-cyan-400">sudo</span> chown www-data:www-data \
  /var/www/html/matrix/data/network_manager.json</pre>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Configurazioni Opzionali -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">‚öôÔ∏è Configurazioni Opzionali (Avanzato)</h3>
                                
                                <details class="bg-slate-50 rounded-lg border border-slate-200 mb-2">
                                    <summary class="font-semibold text-slate-900 p-3 cursor-pointer hover:bg-slate-100">üåê Configurare DNS/Hostname personalizzato</summary>
                                    <div class="p-3 pt-0 text-xs text-slate-700">
                                        <p class="mb-2">Per accedere tramite nome invece di IP (es: <code class="bg-slate-200 px-1 rounded">http://matrix.tiesse.lan</code>):</p>
                                        <ol class="ml-4 list-decimal space-y-1">
                                            <li>Configurare il record DNS nel server DNS interno</li>
                                            <li>Oppure aggiungere nel file hosts di ogni computer client</li>
                                        </ol>
                                    </div>
                                </details>

                                <details class="bg-slate-50 rounded-lg border border-slate-200 mb-2">
                                    <summary class="font-semibold text-slate-900 p-3 cursor-pointer hover:bg-slate-100">üîí Abilitare HTTPS (Certificato SSL)</summary>
                                    <div class="p-3 pt-0 text-xs text-slate-700">
                                        <p class="mb-2">Per reti con certificato SSL interno:</p>
                                        <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs">
<pre><span class="text-cyan-400">sudo</span> a2enmod ssl
<span class="text-cyan-400">sudo</span> a2ensite default-ssl
<span class="text-cyan-400">sudo</span> systemctl restart apache2</pre>
                                        </div>
                                    </div>
                                </details>

                                <details class="bg-slate-50 rounded-lg border border-slate-200 mb-2" open>
                                    <summary class="font-semibold text-slate-900 p-3 cursor-pointer hover:bg-slate-100">üíæ Backup Automatico (Attivo)</summary>
                                    <div class="p-3 pt-0 text-xs text-slate-700">
                                        
                                        <!-- STATO ATTUALE -->
                                        <div class="bg-green-100 border-2 border-green-400 rounded-lg p-3 mb-3">
                                            <p class="font-bold text-green-900 mb-2">‚úÖ BACKUP AUTOMATICO ATTIVO</p>
                                            <div class="grid md:grid-cols-2 gap-3">
                                                <div class="bg-white p-2 rounded-lg border border-green-300">
                                                    <p class="font-semibold text-green-800">üìÖ Backup Settimanale</p>
                                                    <p class="text-green-700">Ogni <strong>Domenica alle 02:00</strong></p>
                                                </div>
                                                <div class="bg-white p-2 rounded-lg border border-green-300">
                                                    <p class="font-semibold text-green-800">üìÜ Backup Mensile</p>
                                                    <p class="text-green-700">Giorno <strong>1 del mese alle 03:00</strong></p>
                                                </div>
                                            </div>
                                            <div class="mt-2 bg-white p-2 rounded-lg border border-green-300">
                                                <p class="font-semibold text-green-800">üìÅ Cartella Backup:</p>
                                                <code class="text-green-700 font-mono">/var/www/html/matrix/backup/</code>
                                            </div>
                                        </div>

                                        <p class="mb-2">Il sistema include uno script di backup automatico con retention policy:</p>
                                        
                                        <div class="bg-emerald-50 border border-emerald-200 rounded-lg p-3 mb-3">
                                            <p class="font-bold text-emerald-900 mb-2">üìã Politica di Retention:</p>
                                            <ul class="text-emerald-700 ml-3 list-disc space-y-1">
                                                <li><strong>Backup Settimanali:</strong> 4 file (ultime 4 settimane)</li>
                                                <li><strong>Backup Mensili:</strong> 12 file (ultimi 12 mesi)</li>
                                            </ul>
                                        </div>

                                        <p class="font-semibold text-slate-900 mb-2">üìÅ Struttura cartelle:</p>
                                        <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs mb-3">
<pre>/var/www/html/matrix/backup/
‚îú‚îÄ‚îÄ backup.sh           <span class="text-slate-500"># Script di backup</span>
‚îú‚îÄ‚îÄ backup.log          <span class="text-slate-500"># Log delle operazioni</span>
‚îú‚îÄ‚îÄ weekly/
‚îÇ   ‚îú‚îÄ‚îÄ backup_week_01.json  <span class="text-slate-500"># Settimana 1</span>
‚îÇ   ‚îú‚îÄ‚îÄ backup_week_02.json  <span class="text-slate-500"># Settimana 2</span>
‚îÇ   ‚îú‚îÄ‚îÄ backup_week_03.json  <span class="text-slate-500"># Settimana 3</span>
‚îÇ   ‚îî‚îÄ‚îÄ backup_week_04.json  <span class="text-slate-500"># Settimana 4</span>
‚îî‚îÄ‚îÄ monthly/
    ‚îú‚îÄ‚îÄ backup_2026_01.json  <span class="text-slate-500"># Gennaio</span>
    ‚îú‚îÄ‚îÄ backup_2026_02.json  <span class="text-slate-500"># Febbraio</span>
    ‚îî‚îÄ‚îÄ ... <span class="text-slate-500">(12 mesi max)</span></pre>
                                        </div>

                                        <p class="font-semibold text-slate-900 mb-2">üîß Comandi utili:</p>
                                        <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs mb-3">
<pre><span class="text-slate-500"># Vedere stato dei backup</span>
<span class="text-cyan-400">sudo</span> /var/www/html/matrix/backup/backup.sh status

<span class="text-slate-500"># Eseguire backup manuale completo</span>
<span class="text-cyan-400">sudo</span> /var/www/html/matrix/backup/backup.sh

<span class="text-slate-500"># Verificare crontab attivo</span>
<span class="text-cyan-400">sudo</span> crontab -l

<span class="text-slate-500"># Vedere log backup</span>
<span class="text-cyan-400">cat</span> /var/www/html/matrix/backup/backup.log</pre>
                                        </div>

                                        <div class="bg-amber-50 border border-amber-200 rounded-lg p-2">
                                            <p class="font-semibold text-amber-900 text-xs">‚ö†Ô∏è Ripristino da Backup:</p>
                                            <p class="text-amber-700 text-xs">Per ripristinare, copiare il file .json desiderato in <code class="bg-amber-200 px-1 rounded">data/network_manager.json</code></p>
                                        </div>
                                    </div>
                                </details>

                                <details class="bg-slate-50 rounded-lg border border-slate-200">
                                    <summary class="font-semibold text-slate-900 p-3 cursor-pointer hover:bg-slate-100">üõ°Ô∏è Limitare Accesso per IP</summary>
                                    <div class="p-3 pt-0 text-xs text-slate-700">
                                        <p class="mb-2">Per limitare l'accesso solo alla rete interna, modificare <code class="bg-slate-200 px-1 rounded">/etc/apache2/sites-available/000-default.conf</code>:</p>
                                        <div class="bg-slate-800 rounded p-2 font-mono text-green-400 text-xs">
<pre>&lt;Directory /var/www/html/matrix&gt;
    Require ip 192.168.1.0/24
    Require ip 10.0.0.0/8
&lt;/Directory&gt;</pre>
                                        </div>
                                    </div>
                                </details>
                            </div>

                            <!-- Troubleshooting -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üîß Risoluzione Problemi Comuni</h3>
                                
                                <div class="space-y-3 text-xs">
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <p class="font-bold text-red-900 mb-1">‚ùå Errore 403 Forbidden</p>
                                        <p class="text-red-700">Permessi errati. Eseguire: <code class="bg-red-200 px-1 rounded">sudo chown -R www-data:www-data /var/www/html/matrix</code></p>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <p class="font-bold text-red-900 mb-1">‚ùå Errore 500 Internal Server Error</p>
                                        <p class="text-red-700">Verificare log: <code class="bg-red-200 px-1 rounded">sudo tail -50 /var/log/apache2/error.log</code></p>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <p class="font-bold text-red-900 mb-1">‚ùå Non salva le modifiche</p>
                                        <p class="text-red-700">Cartella data senza permesso di scrittura: <code class="bg-red-200 px-1 rounded">sudo chmod 775 /var/www/html/matrix/data</code></p>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <p class="font-bold text-red-900 mb-1">‚ùå Pagina bianca</p>
                                        <p class="text-red-700">PHP non installato correttamente. Verificare: <code class="bg-red-200 px-1 rounded">php -v</code> e <code class="bg-red-200 px-1 rounded">sudo a2enmod php8.3</code></p>
                                    </div>
                                    <div class="bg-red-50 p-3 rounded-lg border border-red-200">
                                        <p class="font-bold text-red-900 mb-1">‚ùå Login non funziona</p>
                                        <p class="text-red-700">Verificare che il file config.php esista e sia leggibile. Contattare l'amministratore per le credenziali.</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Comandi Utili -->
                            <div class="bg-white rounded-lg p-4 border border-orange-200">
                                <h3 class="font-bold text-orange-900 mb-3">üìã Comandi Utili per Amministratori</h3>
                                
                                <div class="bg-slate-900 rounded-lg p-4 font-mono text-sm text-green-400 overflow-x-auto">
<pre><span class="text-slate-500"># Verificare stato Apache</span>
<span class="text-cyan-400">sudo</span> systemctl status apache2

<span class="text-slate-500"># Riavviare Apache (dopo modifiche)</span>
<span class="text-cyan-400">sudo</span> systemctl restart apache2

<span class="text-slate-500"># Vedere log errori Apache</span>
<span class="text-cyan-400">sudo</span> tail -f /var/log/apache2/error.log

<span class="text-slate-500"># Vedere log accessi</span>
<span class="text-cyan-400">sudo</span> tail -f /var/log/apache2/access.log

<span class="text-slate-500"># Verificare permessi cartella matrix</span>
ls -la /var/www/html/matrix/

<span class="text-slate-500"># Verificare spazio disco</span>
df -h /var/www/html/

<span class="text-slate-500"># Verificare versione PHP</span>
php -v

<span class="text-slate-500"># Fare backup manuale dei dati</span>
<span class="text-cyan-400">sudo</span> cp /var/www/html/matrix/data/network_manager.json \
   ~/backup_matrix_$(date +%Y%m%d_%H%M%S).json

<span class="text-slate-500"># Verificare IP del server</span>
ip addr show | grep "inet "</pre>
                                </div>
                            </div>

                            <!-- Supporto -->
                            <div class="bg-gradient-to-r from-blue-100 to-indigo-100 rounded-lg p-4 border border-blue-300">
                                <h3 class="font-bold text-blue-900 mb-2">üìû Supporto</h3>
                                <p class="text-blue-800 text-sm">Per supporto tecnico o domande sull'installazione, contattare il dipartimento IT interno.</p>
                                <div class="mt-3 flex gap-4 text-xs">
                                    <span class="bg-white px-3 py-1 rounded-lg text-blue-700">üìö Versione: 3.5.040</span>
                                </div>
                            </div>
                        </div>
                        <a href="#help-index" class="text-orange-600 text-xs mt-3 inline-block hover:underline">‚Üë Torna all'indice</a>
                    </div>

                    <!-- ========== FOOTER ========== -->
                    <div class="text-center text-slate-400 text-xs py-4 border-t border-slate-200 mt-6">
                        <p class="font-semibold text-slate-600">¬© 2026 Tiesse S.P.A. ‚Äî All rights reserved</p>
                        <p class="mt-1">TIESSE Matrix Network v3.6.021</p>
                        <p class="mt-2 text-red-500 font-medium">‚ö†Ô∏è Confidential document ‚Äî Reproduction prohibited ‚Äî For internal use only</p>
                    </div>
                </div>
            </div>

            <!-- Tab: SVG Topology with Cisco Icons -->
            <div id="content-drawio" class="tab-content">
                <!-- Header with title -->
                <div class="flex items-center gap-3 mb-1">
                    <h2 class="text-xl font-bold text-slate-800">üó∫Ô∏è Network Topology</h2>
                    <div id="topologyStats" class="flex items-center gap-2 text-xs">
                        <!-- Stats populated by JS -->
                    </div>
                </div>
                <!-- Subtitle + Controls (same line) -->
                <div class="flex items-center justify-between gap-4 mb-4 flex-wrap">
                    <p class="text-xs text-slate-500 italic">Visualizza graficamente la topologia della rete.</p>
                    <!-- Right: Controls -->
                    <div class="flex items-center gap-2 flex-wrap">
                        <!-- Filters -->
                        <select id="topologyLocationFilter" onchange="filterTopologyByLocation()" class="px-2 py-1 border-2 border-slate-400 rounded-lg text-sm bg-slate-50 font-semibold text-slate-800">
                            <option value="">üìç All Locations</option>
                        </select>
                        <select id="topologyRackFilter" onchange="filterTopologyByRack()" class="px-2 py-1 border border-slate-300 rounded-lg text-sm">
                            <option value="">üóÑÔ∏è All Groups</option>
                        </select>
                        <select id="drawioLayout" onchange="updateDrawioLayout()" class="px-2 py-1 border border-slate-300 rounded-lg text-sm">
                            <option value="auto">Auto Layout</option>
                            <option value="circle">Circle</option>
                            <option value="grid">Grid</option>
                            <option value="hierarchical">Hierarchical</option>
                        </select>
                        
                        <!-- Zoom/Fit Controls -->
                        <div class="flex items-center gap-1 border-l border-slate-300 pl-2">
                            <button onclick="fitDrawioView()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2.5 rounded text-sm" title="Fit to View">üó∫Ô∏è Fit</button>
                            <button onclick="showTopologyLegend()" class="bg-purple-500 hover:bg-purple-600 text-white font-semibold py-1 px-2.5 rounded text-sm" title="Show Legend">üìã Legend</button>
                        </div>
                        
                        <!-- Export Actions -->
                        <div class="flex items-center gap-1 border-l border-slate-300 pl-2">
                            <button onclick="printTopology()" class="bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" title="Print Topology">üñ®Ô∏è Print</button>
                            <button onclick="exportDrawioPNG()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" title="Export as PNG">üì∑ PNG</button>
                            <button onclick="exportTopologyDrawio()" class="bg-orange-500 hover:bg-orange-600 text-white font-semibold py-1 px-2.5 rounded-lg text-sm" title="Export as .drawio">üì• Drawio</button>
                        </div>
                    </div>
                </div>
                <div id="drawioContainer" class="border border-slate-300 rounded-xl bg-white" style="height: 600px; width: 100%; overflow: hidden; position: relative;">
                    <div class="flex items-center justify-center h-full text-slate-400">
                        <p>Loading topology visualization...</p>
                    </div>
                </div>

                <!-- Tip - Compact version -->
                <p class="mt-2 text-xs text-blue-600">üí° Drag devices to reposition ‚Ä¢ Export .drawio for <a href="https://app.diagrams.net" target="_blank" class="text-blue-700 hover:underline font-semibold">diagrams.net</a> ‚Ä¢ PNG includes title & date</p>
            </div>

            <!-- Tab 6: Activity Logs -->
            <div id="content-logs" class="tab-content">
                <div class="flex items-center justify-between mb-4">
                    <div>
                        <h2 class="text-xl font-bold text-slate-800">üìã Activity Logs</h2>
                        <p class="text-xs text-slate-500">Last 200 changes</p>
                    </div>
                    <div class="flex gap-2">
                        <select id="logFilter" onchange="filterLogs()" class="px-3 py-1.5 border border-slate-300 rounded-lg text-sm">
                            <option value="">All Activities</option>
                            <option value="device">Devices</option>
                            <option value="connection">Connections</option>
                            <option value="import">Import/Export</option>
                            <option value="auth">Authentication</option>
                        </select>
                        <button onclick="clearLogs()" class="edit-mode-only bg-red-500 hover:bg-red-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm" style="display:none;">
                            üóëÔ∏è Clear Logs
                        </button>
                        <button onclick="exportLogs()" class="bg-slate-500 hover:bg-slate-600 text-white font-semibold py-1.5 px-3 rounded-lg text-sm">
                            üì• Export Logs
                        </button>
                    </div>
                </div>
                <div id="logsContainer" class="border border-slate-200 rounded-xl overflow-hidden">
                    <table class="w-full text-sm">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="px-3 py-2 text-left font-semibold text-slate-700 w-40">Timestamp</th>
                                <th class="px-3 py-2 text-left font-semibold text-slate-700 w-24">Action</th>
                                <th class="px-3 py-2 text-left font-semibold text-slate-700 w-24">Type</th>
                                <th class="px-3 py-2 text-left font-semibold text-slate-700">Details</th>
                                <th class="px-3 py-2 text-left font-semibold text-slate-700 w-24">User</th>
                            </tr>
                        </thead>
                        <tbody id="logsTableBody" class="divide-y divide-slate-100">
                            <tr><td colspan="5" class="px-3 py-8 text-center text-slate-400">No logs yet</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-xl shadow-2xl p-6 w-full max-w-sm mx-4">
            <div class="text-center mb-6">
                <h2 class="text-xl font-bold text-slate-800">üîê Edit Mode Access</h2>
                <p class="text-sm text-slate-500 mt-1">Enter your credentials to edit</p>
            </div>
            <form id="loginForm" onsubmit="Auth.handleLoginSubmit(event)">
                <div class="space-y-4">
                    <div>
                        <label for="loginUsername" class="block text-sm font-medium text-slate-700 mb-1">Username</label>
                        <input type="text" id="loginUsername" name="username" required autocomplete="username"
                            class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div>
                        <label for="loginPassword" class="block text-sm font-medium text-slate-700 mb-1">Password</label>
                        <input type="password" id="loginPassword" name="password" required autocomplete="current-password"
                            class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                    </div>
                    <div id="loginError" class="text-red-500 text-sm text-center hidden"></div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button type="button" onclick="Auth.hideLoginModal()"
                        class="flex-1 bg-slate-200 hover:bg-slate-300 text-slate-700 font-semibold py-2 px-4 rounded-lg">
                        Cancel
                    </button>
                    <button type="submit" id="loginSubmitBtn"
                        class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg">
                        Login
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Legend Modal -->
    <div id="legendModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" onclick="closeLegendModal(event)">
        <div class="bg-white rounded-2xl shadow-2xl p-8 w-[90vw] max-w-6xl max-h-[90vh] overflow-y-auto mx-4" onclick="event.stopPropagation()">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-slate-800">üìã Network Topology Overview</h2>
                <button onclick="closeLegendModal()" class="text-slate-400 hover:text-slate-600 text-3xl font-bold leading-none">&times;</button>
            </div>
            <div id="legendModalContent">
                <!-- Content will be populated by JS -->
            </div>
        </div>
    </div>

    <!-- Device Detail Modal -->
    <div id="deviceDetailModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden" onclick="DeviceDetail.close(event)">
        <div class="bg-white rounded-2xl shadow-2xl w-[95vw] max-w-5xl max-h-[90vh] overflow-hidden mx-4" onclick="event.stopPropagation()">
            <!-- Header -->
            <div id="deviceDetailHeader" class="bg-gradient-to-r from-slate-800 to-slate-700 text-white p-4">
                <!-- Populated by JS -->
            </div>
            <!-- Content -->
            <div id="deviceDetailContent" class="p-4 overflow-y-auto" style="max-height: calc(90vh - 180px);">
                <!-- Populated by JS -->
            </div>
            <!-- Port Detail Bar -->
            <div id="deviceDetailPortBar" class="bg-slate-100 border-t border-slate-200 p-3 text-sm text-slate-600 hidden">
                <span id="deviceDetailPortInfo">Click on a port to see details</span>
            </div>
        </div>
    </div>

    <!-- Load external JavaScript modules with cache-buster -->
    <script src="js/editlock.js?v=3.6.021"></script>
    <script src="js/auth.js?v=3.6.021"></script>
    <script src="js/app.js?v=3.6.021"></script>
    <script src="js/ui-updates.js?v=3.6.021"></script>
    <script src="js/features.js?v=3.6.021"></script>
    <script src="js/floorplan.js?v=3.6.021"></script>
    <script src="js/json-validator.js?v=3.6.021"></script>
    <script src="js/dashboard.js?v=3.6.021"></script>
    <script src="js/device-detail.js?v=3.6.021"></script>
    
    <!-- Update connections count when list lists -->
    <script>
        (function() {
            var origUpdateConnList = window.updateConnectionsList;
            window.updateConnectionsList = function() {
                origUpdateConnList.apply(this, arguments);
                var countEl = document.getElementById('connectionsCount');
                if (countEl && window.appState) {
                    countEl.textContent = appState.connections.length;
                }
                // Update location filter
                if (typeof LocationFilter !== 'undefined') {
                    LocationFilter.update();
                }
            };
            
            var origUpdateDevList = window.updateDevicesList;
            window.updateDevicesList = function() {
                origUpdateDevList.apply(this, arguments);
                // Update location filter
                if (typeof LocationFilter !== 'undefined') {
                    LocationFilter.update();
                }
            };
        })();
    </script>

</body>
</html>
